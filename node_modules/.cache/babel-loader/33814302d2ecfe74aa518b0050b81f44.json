{"ast":null,"code":"import _slicedToArray from\"/Users/johnny/IC/Computing/year2/DRP/drp48/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState,useEffect}from'react';import{LoginContext}from'../../LoginContext';import{useStyles}from'../appbar';import{onIndex,moveFromTo,deleteCardAt,addHandCard,getAHandCard,insertCardTo,onGoalJson,moveWithin,deleteHandCard,changeCountHandCard}from'./editorUtils';import{EditorPremise}from'./EditorPremise';import{EditorHand}from'./EditorHand';import AppBar from'@material-ui/core/AppBar/AppBar';import{parseGoalTreeSafe,getExprFromJson}from'../../server/gameApp/game/goal';import{evalSuccess}from'../../game/views';import{EditorGoal}from'./EditorGoals';import{EditorAllCards}from'./EditorAllCards';import Axios from'axios';import{Button,Form}from'react-bootstrap';import{Paths}from'../../routesPaths';import Dialog from'@material-ui/core/Dialog';import DialogTitle from'@material-ui/core/DialogTitle/DialogTitle';import DialogContent from'@material-ui/core/DialogContent';import DialogActions from'@material-ui/core/DialogActions';import MButton from'@material-ui/core/Button';import Divider from'@material-ui/core/Divider';import Toolbar from'@material-ui/core/Toolbar';import Typography from'@material-ui/core/Typography';import IconButton from'@material-ui/core/IconButton';import Drawer from'@material-ui/core/Drawer';import List from'@material-ui/core/List';import ListItem from'@material-ui/core/ListItem';import ListItemText from'@material-ui/core/ListItemText';import{LinkContainer}from'react-router-bootstrap';import MenuIcon from'@material-ui/icons/Menu';import AddIcon from'@material-ui/icons/Add';import EditIcon from'@material-ui/icons/Edit';import UndoIcon from'@material-ui/icons/Undo';import RemoveIcon from'@material-ui/icons/Remove';import FeedbackIcon from'@material-ui/icons/Feedback';import PublishIcon from'@material-ui/icons/Publish';import HelpIcon from'@material-ui/icons/Help';import{ChangeGoalDialogue}from'./ChangeGoalDialogue';import{Fab,Grid,Tooltip,GridList,GridListTile,BottomNavigation,TextField,LinearProgress}from'@material-ui/core';import{EditorModifyCardCountDialogue}from'./EditorModifyCardCount';import{parsePremiseSafe}from'../../server/gameApp/game/premise';import{DescEditorDialogue}from'./DescEditorDialogue';import{TruthTable}from'../game/Truthtable';import TUTORIAL_1 from\"../../src_img/tutorial/HELP_1.gif\";import TUTORIAL_2 from\"../../src_img/tutorial/HELP_2.gif\";import TUTORIAL_3 from\"../../src_img/tutorial/HELP_3.gif\";export var EditorContext=React.createContext({state:{kind:'idle'},premises:[],handCards:[],goals:[],lockedPremises:[],goalTrees:[],setIdle:function setIdle(){}});export var LevelEditor=function LevelEditor(){var classes=useStyles();var logins=useContext(LoginContext);var _useState=useState(\"A new level\"),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),desc=_useState4[0],setDesc=_useState4[1];var _useState5=useState({kind:'idle'}),_useState6=_slicedToArray(_useState5,2),state=_useState6[0],setState=_useState6[1];var _useState7=useState([[],[],[],[]]),_useState8=_slicedToArray(_useState7,2),premises=_useState8[0],setPremises=_useState8[1];var _useState9=useState([0,2,3]),_useState10=_slicedToArray(_useState9,2),lockedPremises=_useState10[0],setLockedPremises=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),handCards=_useState12[0],setHandCards=_useState12[1];var _useState13=useState([{kind:'prove',expr:['A']}]),_useState14=_slicedToArray(_useState13,2),goals=_useState14[0],setGoals=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),goalTrees=_useState16[0],setGoalTrees=_useState16[1];var _useState17=useState(premises.map(function(_){return false;})),_useState18=_slicedToArray(_useState17,2),isSuccess=_useState18[0],setSuccess=_useState18[1];var _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),history=_useState20[0],setHistory=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),isShowDrawer=_useState22[0],setShowDrawer=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),isShowHelp=_useState24[0],setShowHelp=_useState24[1];var _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),isShowTruthTable=_useState26[0],setShowTruthTable=_useState26[1];var _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),isChangeDesc=_useState28[0],setChangeDesc=_useState28[1];var _useState29=useState(false),_useState30=_slicedToArray(_useState29,2),onConfirm=_useState30[0],setOnConfirm=_useState30[1];var _useState31=useState(false),_useState32=_slicedToArray(_useState31,2),onSubmit=_useState32[0],setOnSubmit=_useState32[1];var _useState33=useState(0),_useState34=_slicedToArray(_useState33,2),onModifyCardPos=_useState34[0],setModifyCardPos=_useState34[1];var tutorials=[/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(Form.Label,null,\"How to unselect a card?\")),/*#__PURE__*/React.createElement(\"img\",{src:TUTORIAL_1,width:\"500\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(Form.Label,null,\"Locked premise: available for player to modify.\"),/*#__PURE__*/React.createElement(Form.Label,null,\"Unlocked premise: player can only read without modify.\")),/*#__PURE__*/React.createElement(\"img\",{src:TUTORIAL_2,width:\"500\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(Form.Label,null,\"How to unlock a premise?\")),/*#__PURE__*/React.createElement(\"img\",{src:TUTORIAL_3,width:\"500\"}))];var _useState35=useState(0),_useState36=_slicedToArray(_useState35,2),tutorialIndex=_useState36[0],setTutorialIndex=_useState36[1];// set goalTrees on goals change\nuseEffect(function(){var trees=goals.map(function(g){return parseGoalTreeSafe(g);});setGoalTrees(trees);console.log(trees);var gs=goals.map(function(g,i){switch(g.kind){case'paradox':case'tautology':return{kind:g.kind,expr:undefined,boolTree:undefined};default:return trees[i]?{kind:g.kind,expr:g.expr,boolTree:trees[i]}:undefined;}});setSuccess(evalSuccess(premises,gs));},[goals,premises]);var evictJson=function evictJson(){var cards=[];var limitedCards=[];handCards.forEach(function(_ref){var _ref2=_slicedToArray(_ref,2),card=_ref2[0],count=_ref2[1];if(count==Number.POSITIVE_INFINITY){cards.push(card);}else{limitedCards.push([card,count]);}});return{title:title,premises:premises,lockedPremises:lockedPremises,cards:cards,limitedCards:limitedCards,goals:goals,description:desc};};// state handlers\nvar setSelect=function setSelect(select){setState({kind:'select',select:select});};var setIdle=function setIdle(){return setState({kind:'idle'});};var setHandCardCount=function setHandCardCount(hpos,count){var hcs=changeCountHandCard(hpos,count)(handCards).state;setHandCards(hcs);setIdle();};var setLockPremise=function setLockPremise(i){if(lockedPremises.includes(i)){setLockedPremises(lockedPremises.filter(function(j){return j!=i;}));}else{setLockedPremises(lockedPremises.concat(i));}};var setAddGoal=function setAddGoal(){setGoals(goals.concat({kind:'prove',expr:[]}));};var setRemoveGoal=function setRemoveGoal(gid){setGoals(goals.filter(function(_,i){return gid!=i;}));};var setModifyGoal=function setModifyGoal(gid,goal){setGoals(goals.map(function(g,i){return i==gid?goal:g;}));};var setOpenHandCardEditor=function setOpenHandCardEditor(i){setModifyCardPos(i);setState({kind:'changeHand'});};var pushHistory=function pushHistory(){var curr={premises:premises,lockedPremises:lockedPremises,handCards:handCards,goals:goals};setHistory([curr].concat(history));};var undoHistory=function undoHistory(){if(history.length>0){var last=history[0];setHistory(history.slice(1));setPremises(last.premises);setLockedPremises(last.lockedPremises);setHandCards(last.handCards);setGoals(last.goals);}};// Drop event handlers\nvar onDropToPremise=function onDropToPremise(pid,ppos){if(state.kind==='select'){var select=state.select;switch(select.kind){case'premise':{var ps=moveWithin(premises,onIndex(select.pid,deleteCardAt(select.ppos)),function(card){return onIndex(pid,insertCardTo(card,ppos));});setPremises(ps);break;}case'hand':{var _moveFromTo=moveFromTo(handCards,getAHandCard(select.hpos),premises,function(card){return onIndex(pid,insertCardTo(card,ppos));}),_moveFromTo2=_slicedToArray(_moveFromTo,2),hcs=_moveFromTo2[0],_ps=_moveFromTo2[1];setPremises(_ps);setHandCards(hcs);break;}case'goal':{var _moveFromTo3=moveFromTo(goals,onIndex(select.gid,onGoalJson(deleteCardAt(select.gpos))),premises,function(card){return onIndex(pid,insertCardTo(card,ppos));}),_moveFromTo4=_slicedToArray(_moveFromTo3,2),gs=_moveFromTo4[0],_ps2=_moveFromTo4[1];setGoals(gs);setPremises(_ps2);break;}case'all':{var _ps3=onIndex(pid,insertCardTo(select.card,ppos))(premises).state;setPremises(_ps3);break;}}pushHistory();setIdle();}};var onDropToHand=function onDropToHand(){if(state.kind==='select'){var select=state.select;switch(select.kind){case'premise':{var _moveFromTo5=moveFromTo(premises,onIndex(select.pid,deleteCardAt(select.ppos)),handCards,function(card){return addHandCard(card,1);}),_moveFromTo6=_slicedToArray(_moveFromTo5,2),ps=_moveFromTo6[0],hcs=_moveFromTo6[1];setPremises(ps);setHandCards(hcs);break;}case'hand':{var _hcs=moveWithin(handCards,getAHandCard(select.hpos),function(card){return addHandCard(card,1);});setHandCards(_hcs);break;}case'goal':{var _moveFromTo7=moveFromTo(goals,onIndex(select.gid,onGoalJson(deleteCardAt(select.gpos))),handCards,function(card){return addHandCard(card,1);}),_moveFromTo8=_slicedToArray(_moveFromTo7,2),gs=_moveFromTo8[0],_hcs2=_moveFromTo8[1];setGoals(gs);setHandCards(_hcs2);break;}case'all':{var _ps4=addHandCard(select.card,1)(handCards).state;setHandCards(_ps4);break;}}pushHistory();setIdle();}};var onDropToGoal=function onDropToGoal(gid,gpos){if(state.kind==='select'){var select=state.select;switch(select.kind){case'premise':{var _moveFromTo9=moveFromTo(premises,onIndex(select.pid,deleteCardAt(select.ppos)),goals,function(card){return onIndex(gid,onGoalJson(insertCardTo(card,gpos)));}),_moveFromTo10=_slicedToArray(_moveFromTo9,2),ps=_moveFromTo10[0],gs=_moveFromTo10[1];setPremises(ps);setGoals(gs);break;}case'hand':{var _moveFromTo11=moveFromTo(handCards,getAHandCard(select.hpos),goals,function(card){return onIndex(gid,onGoalJson(insertCardTo(card,gpos)));}),_moveFromTo12=_slicedToArray(_moveFromTo11,2),hcs=_moveFromTo12[0],_gs=_moveFromTo12[1];setHandCards(hcs);setGoals(_gs);break;}case'goal':{var _gs2=moveWithin(goals,onIndex(select.gid,onGoalJson(deleteCardAt(select.gpos))),function(card){return onIndex(gid,onGoalJson(insertCardTo(card,gpos)));});setGoals(_gs2);break;}case'all':{var _gs3=onIndex(gid,onGoalJson(insertCardTo(select.card,gpos)))(goals).state;setGoals(_gs3);break;}}pushHistory();setIdle();}};var onDropToAllCards=function onDropToAllCards(){if(state.kind==='select'){var select=state.select;switch(select.kind){case'premise':{var ps=onIndex(select.pid,deleteCardAt(select.ppos))(premises).state;setPremises(ps);break;}case'hand':{var hcs=deleteHandCard(select.hpos)(handCards).state;setHandCards(hcs);break;}case'goal':{var gs=onIndex(select.gid,onGoalJson(deleteCardAt(select.gpos)))(goals).state;setGoals(gs);break;}case'all':{break;}}pushHistory();setIdle();}};// misc actions\nvar toggleDrawer=function toggleDrawer(open){return function(event){if(event.type==='keydown'&&(event.key==='Tab'||event.key==='Shift')){return;}setShowDrawer(open);};};var toggleConfirm=function toggleConfirm(){if(logins.user===undefined){alert(\"You need to login first!\");logins.onLogin();}else if(goals.length>0&&goals.map(function(g){return getExprFromJson(g);}).every(function(expr){return parsePremiseSafe(expr)!==undefined;})&&handCards.length>0){setOnConfirm(true);}else{alert(\"This is not a valid level!\");}};// post to server\nvar postJsonToServer=function postJsonToServer(){var data={user:logins.user,level:evictJson()};setOnSubmit(true);Axios.post(Paths.submitLevelJson,data).then(function(){return alert(\"Submission successful!\");}).catch(function(err){return alert(err);}).finally(function(){setOnSubmit(false);setOnConfirm(false);});};// rendering\nvar renderAppBar=function renderAppBar(){return/*#__PURE__*/React.createElement(AppBar,{position:\"static\"},/*#__PURE__*/React.createElement(Toolbar,{style:{backgroundColor:'#F2994A'}},/*#__PURE__*/React.createElement(Typography,{variant:\"h6\",className:classes.title},title,/*#__PURE__*/React.createElement(Tooltip,{title:\"Edit level name and description\",arrow:true},/*#__PURE__*/React.createElement(IconButton,{onClick:function onClick(){return setChangeDesc(true);}},/*#__PURE__*/React.createElement(EditIcon,null)))),/*#__PURE__*/React.createElement(IconButton,{edge:\"start\",className:classes.menuButton,color:\"inherit\",\"aria-label\":\"menu\",onClick:toggleDrawer(true)},/*#__PURE__*/React.createElement(MenuIcon,null)),/*#__PURE__*/React.createElement(Drawer,{anchor:\"right\",open:isShowDrawer,onClose:toggleDrawer(false)},renderDrawerContent())));};var renderDrawerContent=function renderDrawerContent(){var menu=/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(List,null,/*#__PURE__*/React.createElement(LinkContainer,{to:\"/\"},/*#__PURE__*/React.createElement(ListItem,{button:true,key:\"menu\",onClick:function onClick(){}},/*#__PURE__*/React.createElement(ListItemText,{primary:\"Back to Main Menu\"})))));return menu;};var renderPremise=function renderPremise(i){return/*#__PURE__*/React.createElement(EditorPremise,{category:{kind:'premise',index:i},scale:1,onLock:function onLock(){return setLockPremise(i);},onSelect:function onSelect(ppos){return setSelect({kind:'premise',pid:i,ppos:ppos});},onDrop:function onDrop(ppos){return onDropToPremise(i,ppos);}});};var renderPremises=function renderPremises(){return premises.map(function(_,i){return renderPremise(i);});};var renderHand=function renderHand(){return/*#__PURE__*/React.createElement(EditorHand,{onPick:function onPick(hpos){return setSelect({kind:'hand',hpos:hpos});},onClickOnTag:setOpenHandCardEditor,onDrop:onDropToHand});};var renderModifyCardCount=function renderModifyCardCount(){return/*#__PURE__*/React.createElement(EditorModifyCardCountDialogue,{hpos:onModifyCardPos,onSubmit:function onSubmit(c){setHandCardCount(onModifyCardPos,c);}});};var renderGoal=function renderGoal(){return/*#__PURE__*/React.createElement(GridListTile,null,/*#__PURE__*/React.createElement(EditorGoal,{isSuccessful:isSuccess,onSelect:function onSelect(gid,gpos){return setSelect({kind:'goal',gid:gid,gpos:gpos});},onDrop:onDropToGoal,onChange:function onChange(gid){return setState({kind:'changeGoal',gid:gid,newGoal:goals[gid]});}}));};var renderGoals=function renderGoals(){return/*#__PURE__*/React.createElement(\"div\",null,renderGoal(),/*#__PURE__*/React.createElement(\"div\",{style:{width:'40',textAlign:'left',marginBottom:'20px',marginRight:'70px',position:'absolute',right:'0'}},/*#__PURE__*/React.createElement(Tooltip,{title:\"Add a new goal\",\"aria-label\":\"add\",arrow:true},/*#__PURE__*/React.createElement(Fab,{style:{left:40,backgroundColor:'#F2994A',color:'#fff'},onClick:setAddGoal},/*#__PURE__*/React.createElement(AddIcon,{style:{fontSize:'30'}}))),/*#__PURE__*/React.createElement(Tooltip,{title:\"Delete the last goal\",\"aria-label\":\"del\",arrow:true},/*#__PURE__*/React.createElement(Fab,{style:{left:40,backgroundColor:'#A359A3',color:'#fff',margin:'20px'},onClick:function onClick(){return setRemoveGoal(goals.length-1);}},/*#__PURE__*/React.createElement(RemoveIcon,{style:{fontSize:'30'}})))),/*#__PURE__*/React.createElement(ChangeGoalDialogue,{updateGoal:function updateGoal(g){return setState({kind:'changeGoal',gid:state.kind=='changeGoal'?state.gid:-1,newGoal:g});},confirmGoal:function confirmGoal(){if(state.kind=='changeGoal'){setModifyGoal(state.gid,state.newGoal);}},deleteGoal:function deleteGoal(gid){return setRemoveGoal(gid);}}));};var renderTruthTable=function renderTruthTable(){return/*#__PURE__*/React.createElement(Dialog,{open:isShowTruthTable,onClose:function onClose(){return setShowTruthTable(false);},title:\"Truth Table\"},/*#__PURE__*/React.createElement(TruthTable,{premises:premises}));};var renderAllCardsList=function renderAllCardsList(){return/*#__PURE__*/React.createElement(EditorAllCards,{onSelect:function onSelect(c){return setSelect({kind:'all',card:c});},onDrop:onDropToAllCards});};var renderConfirmation=function renderConfirmation(){return/*#__PURE__*/React.createElement(Dialog,{open:onConfirm,onClose:function onClose(){return setOnConfirm(false);}},/*#__PURE__*/React.createElement(DialogTitle,null,\"Submit\"),/*#__PURE__*/React.createElement(DialogContent,null,\"Are you sure you want to submit your level?\",/*#__PURE__*/React.createElement(GridList,{cols:1,style:{width:'300px',height:'200px',marginTop:'10px'}},/*#__PURE__*/React.createElement(GridListTile,null,/*#__PURE__*/React.createElement(TextField,{id:\"outlined-read-only-input\",label:\"Level Setup in JSON\",multiline:true,defaultValue:JSON.stringify(evictJson()),InputProps:{readOnly:true},style:{marginTop:'20px'},variant:\"outlined\",fullWidth:true})))),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(\"div\",null,onSubmit?/*#__PURE__*/React.createElement(LinearProgress,null):undefined),/*#__PURE__*/React.createElement(DialogActions,null,/*#__PURE__*/React.createElement(MButton,{onClick:postJsonToServer},\"Confirm\")));};var renderFooter=function renderFooter(){return/*#__PURE__*/React.createElement(BottomNavigation,{value:0,showLabels:true,className:classes.root,style:{width:'100%',position:'sticky',bottom:0}},/*#__PURE__*/React.createElement(MButton,{startIcon:/*#__PURE__*/React.createElement(UndoIcon,null),onClick:undoHistory},\"UNDO ONE STEP\"),/*#__PURE__*/React.createElement(MButton,{startIcon:/*#__PURE__*/React.createElement(HelpIcon,null),onClick:function onClick(){return setShowHelp(true);}},\"HELP\"),/*#__PURE__*/React.createElement(MButton,{startIcon:/*#__PURE__*/React.createElement(EditIcon,null),onClick:function onClick(){return setChangeDesc(true);}},\"EDIT DESCRIPTION\"),/*#__PURE__*/React.createElement(MButton,{startIcon:/*#__PURE__*/React.createElement(FeedbackIcon,null),onClick:function onClick(){return setShowTruthTable(true);}},\"SHOW TRUTH TABLE\"),/*#__PURE__*/React.createElement(MButton,{startIcon:/*#__PURE__*/React.createElement(PublishIcon,null),onClick:toggleConfirm},\"SUBMIT\"));};var setNextTutorial=function setNextTutorial(){if(tutorialIndex<tutorials.length-1){setTutorialIndex(tutorialIndex+1);}else{setTutorialIndex(0);setShowHelp(false);}};var setPrevTutorial=function setPrevTutorial(){if(tutorialIndex!==0){setTutorialIndex(tutorialIndex-1);}};return/*#__PURE__*/React.createElement(EditorContext.Provider,{value:{state:state,premises:premises,handCards:handCards,goals:goals,lockedPremises:lockedPremises,goalTrees:goalTrees,setIdle:setIdle}},/*#__PURE__*/React.createElement(\"div\",null,renderAppBar(),renderPremises(),/*#__PURE__*/React.createElement(Divider,{style:{margin:'10px'}}),/*#__PURE__*/React.createElement(Grid,{container:true},/*#__PURE__*/React.createElement(Grid,{item:true,xs:4},/*#__PURE__*/React.createElement(GridList,{cols:1,style:{flexWrap:'nowrap',transform:'translateZ(0)',height:'220px'}},renderGoals())),/*#__PURE__*/React.createElement(Divider,{orientation:\"vertical\",flexItem:true}),/*#__PURE__*/React.createElement(Grid,{item:true,xs:4},/*#__PURE__*/React.createElement(GridList,{cols:1,style:{flexWrap:'nowrap',transform:'translateZ(0)',height:'220px'}},renderHand())),/*#__PURE__*/React.createElement(Divider,{orientation:\"vertical\",flexItem:true}),/*#__PURE__*/React.createElement(Grid,{item:true,alignContent:\"center\"},renderAllCardsList())),renderFooter(),renderConfirmation(),renderModifyCardCount(),renderTruthTable(),/*#__PURE__*/React.createElement(DescEditorDialogue,{open:isChangeDesc,title:title,desc:desc,onSubmit:function onSubmit(title,desc){setTitle(title);setDesc(desc);},onCancel:function onCancel(){return setChangeDesc(false);}})),/*#__PURE__*/React.createElement(Dialog,{open:isShowHelp,onClose:function onClose(){return setShowHelp(false);}},/*#__PURE__*/React.createElement(DialogTitle,{style:{width:\"1000px\"}},\"Tutorials\"),/*#__PURE__*/React.createElement(DialogContent,null,/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(Form.Label,null,tutorials[tutorialIndex]))),/*#__PURE__*/React.createElement(DialogActions,null,/*#__PURE__*/React.createElement(Button,{onClick:setPrevTutorial,style:{marginRight:\"38%\",backgroundColor:tutorialIndex==0?'#CCC':\"#307df7\",borderWidth:\"0px\"}},\"\\u2190\"),/*#__PURE__*/React.createElement(\"div\",{style:{marginRight:\"38%\"}},tutorialIndex+1,\"/\",tutorials.length),/*#__PURE__*/React.createElement(Button,{onClick:setNextTutorial,style:{marginRight:\"2%\",backgroundColor:tutorialIndex==tutorials.length-1?'#CCC':\"#307df7\",borderWidth:\"0px\"}},\"\\u2192\"))));};","map":{"version":3,"sources":["/Users/johnny/IC/Computing/year2/DRP/drp48/src/components/editor/LevelEditor.tsx"],"names":["React","useContext","useState","useEffect","LoginContext","useStyles","onIndex","moveFromTo","deleteCardAt","addHandCard","getAHandCard","insertCardTo","onGoalJson","moveWithin","deleteHandCard","changeCountHandCard","EditorPremise","EditorHand","AppBar","parseGoalTreeSafe","getExprFromJson","evalSuccess","EditorGoal","EditorAllCards","Axios","Button","Form","Paths","Dialog","DialogTitle","DialogContent","DialogActions","MButton","Divider","Toolbar","Typography","IconButton","Drawer","List","ListItem","ListItemText","LinkContainer","MenuIcon","AddIcon","EditIcon","UndoIcon","RemoveIcon","FeedbackIcon","PublishIcon","HelpIcon","ChangeGoalDialogue","Fab","Grid","Tooltip","GridList","GridListTile","BottomNavigation","TextField","LinearProgress","EditorModifyCardCountDialogue","parsePremiseSafe","DescEditorDialogue","TruthTable","TUTORIAL_1","TUTORIAL_2","TUTORIAL_3","EditorContext","createContext","state","kind","premises","handCards","goals","lockedPremises","goalTrees","setIdle","LevelEditor","classes","logins","title","setTitle","desc","setDesc","setState","setPremises","setLockedPremises","setHandCards","expr","setGoals","setGoalTrees","map","_","isSuccess","setSuccess","history","setHistory","isShowDrawer","setShowDrawer","isShowHelp","setShowHelp","isShowTruthTable","setShowTruthTable","isChangeDesc","setChangeDesc","onConfirm","setOnConfirm","onSubmit","setOnSubmit","onModifyCardPos","setModifyCardPos","tutorials","tutorialIndex","setTutorialIndex","trees","g","console","log","gs","i","undefined","boolTree","evictJson","cards","limitedCards","forEach","card","count","Number","POSITIVE_INFINITY","push","description","setSelect","select","setHandCardCount","hpos","hcs","setLockPremise","includes","filter","j","concat","setAddGoal","setRemoveGoal","gid","setModifyGoal","goal","setOpenHandCardEditor","pushHistory","curr","undoHistory","length","last","slice","onDropToPremise","pid","ppos","ps","gpos","onDropToHand","onDropToGoal","onDropToAllCards","toggleDrawer","open","event","type","key","toggleConfirm","user","alert","onLogin","every","postJsonToServer","data","level","post","submitLevelJson","then","catch","err","finally","renderAppBar","backgroundColor","menuButton","renderDrawerContent","menu","renderPremise","index","renderPremises","renderHand","renderModifyCardCount","c","renderGoal","newGoal","renderGoals","width","textAlign","marginBottom","marginRight","position","right","left","color","fontSize","margin","renderTruthTable","renderAllCardsList","renderConfirmation","height","marginTop","JSON","stringify","readOnly","renderFooter","root","bottom","setNextTutorial","setPrevTutorial","flexWrap","transform","borderWidth"],"mappings":"iKAAA,MAAOA,CAAAA,KAAP,EAAgBC,UAAhB,CAA4BC,QAA5B,CAAsCC,SAAtC,KAAuD,OAAvD,CACA,OAASC,YAAT,KAA6B,oBAA7B,CAEA,OAASC,SAAT,KAA0B,WAA1B,CACA,OACEC,OADF,CAEEC,UAFF,CAGEC,YAHF,CAIEC,WAJF,CAKEC,YALF,CAMEC,YANF,CAOEC,UAPF,CAQEC,UARF,CASEC,cATF,CAUEC,mBAVF,KAU6B,eAV7B,CAWA,OAASC,aAAT,KAA8B,iBAA9B,CACA,OAASC,UAAT,KAA2B,cAA3B,CAEA,MAAOC,CAAAA,MAAP,KAAmB,iCAAnB,CACA,OAAuBC,iBAAvB,CAA0CC,eAA1C,KAAiE,gCAAjE,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,OAASC,UAAT,KAA2B,eAA3B,CACA,OAASC,cAAT,KAA+B,kBAA/B,CACA,MAAOC,CAAAA,KAAP,KAA0C,OAA1C,CACA,OAAgBC,MAAhB,CAA+BC,IAA/B,KAA2C,iBAA3C,CACA,OAASC,KAAT,KAAsB,mBAAtB,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,WAAP,KAAwB,2CAAxB,CACA,MAAOC,CAAAA,aAAP,KAA0B,iCAA1B,CACA,MAAOC,CAAAA,aAAP,KAA0B,iCAA1B,CACA,MAAOC,CAAAA,OAAP,KAAoB,0BAApB,CACA,MAAOC,CAAAA,OAAP,KAAoB,2BAApB,CACA,MAAOC,CAAAA,OAAP,KAAoB,2BAApB,CACA,MAAOC,CAAAA,UAAP,KAAuB,8BAAvB,CACA,MAAOC,CAAAA,UAAP,KAAuB,8BAAvB,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,IAAP,KAAiB,wBAAjB,CACA,MAAOC,CAAAA,QAAP,KAAqB,4BAArB,CACA,MAAOC,CAAAA,YAAP,KAAyB,gCAAzB,CACA,OAASC,aAAT,KAA8B,wBAA9B,CACA,MAAOC,CAAAA,QAAP,KAAqB,yBAArB,CACA,MAAOC,CAAAA,OAAP,KAAoB,wBAApB,CACA,MAAOC,CAAAA,QAAP,KAAqB,yBAArB,CACA,MAAOC,CAAAA,QAAP,KAAqB,yBAArB,CACA,MAAOC,CAAAA,UAAP,KAAuB,2BAAvB,CACA,MAAOC,CAAAA,YAAP,KAAyB,6BAAzB,CACA,MAAOC,CAAAA,WAAP,KAAwB,4BAAxB,CACA,MAAOC,CAAAA,QAAP,KAAqB,yBAArB,CACA,OAASC,kBAAT,KAAmC,sBAAnC,CACA,OAASC,GAAT,CAAcC,IAAd,CAAoBC,OAApB,CAA6BC,QAA7B,CAAuCC,YAAvC,CAAqDC,gBAArD,CAAuEC,SAAvE,CAAkFC,cAAlF,KAAwG,mBAAxG,CACA,OAASC,6BAAT,KAA8C,yBAA9C,CACA,OAASC,gBAAT,KAAiC,mCAAjC,CACA,OAASC,kBAAT,KAAmC,sBAAnC,CACA,OAASC,UAAT,KAA2B,oBAA3B,CACA,MAAOC,CAAAA,UAAP,KAAuB,mCAAvB,CACA,MAAOC,CAAAA,UAAP,KAAuB,mCAAvB,CACA,MAAOC,CAAAA,UAAP,KAAuB,mCAAvB,CA+BA,MAAO,IAAMC,CAAAA,aAAa,CAAGlE,KAAK,CAACmE,aAAN,CAAoC,CAC/DC,KAAK,CAAE,CAAEC,IAAI,CAAE,MAAR,CADwD,CAE/DC,QAAQ,CAAE,EAFqD,CAG/DC,SAAS,CAAE,EAHoD,CAI/DC,KAAK,CAAE,EAJwD,CAK/DC,cAAc,CAAE,EAL+C,CAM/DC,SAAS,CAAE,EANoD,CAO/DC,OAAO,CAAE,kBAAM,CAAE,CAP8C,CAApC,CAAtB,CAUP,MAAO,IAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CAC/B,GAAMC,CAAAA,OAAO,CAAGxE,SAAS,EAAzB,CACA,GAAMyE,CAAAA,MAAM,CAAG7E,UAAU,CAACG,YAAD,CAAzB,CAF+B,cAILF,QAAQ,CAAC,aAAD,CAJH,wCAIxB6E,KAJwB,eAIjBC,QAJiB,8BAKP9E,QAAQ,CAAW,EAAX,CALD,yCAKxB+E,IALwB,eAKlBC,OALkB,8BAMLhF,QAAQ,CAAc,CAAEmE,IAAI,CAAE,MAAR,CAAd,CANH,yCAMxBD,KANwB,eAMjBe,QANiB,8BAOCjF,QAAQ,CAAY,CAAC,EAAD,CAAK,EAAL,CAAS,EAAT,CAAa,EAAb,CAAZ,CAPT,yCAOxBoE,QAPwB,eAOdc,WAPc,8BAQalF,QAAQ,CAAW,CAAC,CAAD,CAAG,CAAH,CAAK,CAAL,CAAX,CARrB,0CAQxBuE,cARwB,gBAQRY,iBARQ,gCASGnF,QAAQ,CAAmB,EAAnB,CATX,2CASxBqE,SATwB,gBASbe,YATa,gCAULpF,QAAQ,CAAe,CAAC,CAAEmE,IAAI,CAAE,OAAR,CAAiBkB,IAAI,CAAE,CAAC,GAAD,CAAvB,CAAD,CAAf,CAVH,2CAUxBf,KAVwB,gBAUjBgB,QAViB,gCAWGtF,QAAQ,CAAyB,EAAzB,CAXX,2CAWxBwE,SAXwB,gBAWbe,YAXa,gCAYCvF,QAAQ,CAAYoE,QAAQ,CAACoB,GAAT,CAAa,SAAAC,CAAC,QAAI,MAAJ,EAAd,CAAZ,CAZT,2CAYxBC,SAZwB,gBAYbC,UAZa,gCAaD3F,QAAQ,CAAkB,EAAlB,CAbP,2CAaxB4F,OAbwB,gBAafC,UAbe,gCAeO7F,QAAQ,CAAC,KAAD,CAff,2CAexB8F,YAfwB,gBAeVC,aAfU,gCAgBG/F,QAAQ,CAAC,KAAD,CAhBX,2CAgBxBgG,UAhBwB,gBAgBZC,WAhBY,gCAiBejG,QAAQ,CAAC,KAAD,CAjBvB,2CAiBxBkG,gBAjBwB,gBAiBNC,iBAjBM,gCAkBOnG,QAAQ,CAAC,KAAD,CAlBf,2CAkBxBoG,YAlBwB,gBAkBVC,aAlBU,gCAmBGrG,QAAQ,CAAC,KAAD,CAnBX,2CAmBxBsG,SAnBwB,gBAmBbC,YAnBa,gCAoBCvG,QAAQ,CAAC,KAAD,CApBT,2CAoBxBwG,QApBwB,gBAoBdC,WApBc,gCAqBazG,QAAQ,CAAS,CAAT,CArBrB,2CAqBxB0G,eArBwB,gBAqBPC,gBArBO,gBAuB/B,GAAMC,CAAAA,SAAmB,CAAG,cAC5B,4CAAK,oBAAC,IAAD,mBAAM,oBAAC,IAAD,CAAM,KAAN,gCAAN,CAAL,cAAkE,2BAAK,GAAG,CAAE/C,UAAV,CAAsB,KAAK,CAAC,KAA5B,EAAlE,CAD4B,cAE5B,4CACE,oBAAC,IAAD,mBACE,oBAAC,IAAD,CAAM,KAAN,wDADF,cAEE,oBAAC,IAAD,CAAM,KAAN,+DAFF,CADF,cAKE,2BAAK,GAAG,CAAEC,UAAV,CAAsB,KAAK,CAAC,KAA5B,EALF,CAF4B,cAQ5B,4CAAK,oBAAC,IAAD,mBAAM,oBAAC,IAAD,CAAM,KAAN,iCAAN,CAAL,cAAmE,2BAAK,GAAG,CAAEC,UAAV,CAAsB,KAAK,CAAC,KAA5B,EAAnE,CAR4B,CAA5B,CAvB+B,gBAgCW/D,QAAQ,CAAC,CAAD,CAhCnB,2CAgCxB6G,aAhCwB,gBAgCTC,gBAhCS,gBAkC/B;AACA7G,SAAS,CAAC,UAAM,CACd,GAAM8G,CAAAA,KAAK,CAAGzC,KAAK,CAACkB,GAAN,CAAU,SAAAwB,CAAC,QAAI/F,CAAAA,iBAAiB,CAAC+F,CAAD,CAArB,EAAX,CAAd,CACAzB,YAAY,CAACwB,KAAD,CAAZ,CACAE,OAAO,CAACC,GAAR,CAAYH,KAAZ,EAEA,GAAMI,CAAAA,EAAwB,CAAG7C,KAAK,CAACkB,GAAN,CAAU,SAACwB,CAAD,CAAII,CAAJ,CAAU,CACnD,OAAQJ,CAAC,CAAC7C,IAAV,EACE,IAAK,SAAL,CACA,IAAK,WAAL,CACE,MAAO,CAAEA,IAAI,CAAE6C,CAAC,CAAC7C,IAAV,CAAgBkB,IAAI,CAAEgC,SAAtB,CAAiCC,QAAQ,CAAED,SAA3C,CAAP,CACF,QACE,MAAON,CAAAA,KAAK,CAACK,CAAD,CAAL,CAAW,CAAEjD,IAAI,CAAE6C,CAAC,CAAC7C,IAAV,CAAgBkB,IAAI,CAAE2B,CAAC,CAAC3B,IAAxB,CAA8BiC,QAAQ,CAAEP,KAAK,CAACK,CAAD,CAA7C,CAAX,CAAiEC,SAAxE,CALJ,CAOD,CARgC,CAAjC,CASA1B,UAAU,CAACxE,WAAW,CAACiD,QAAD,CAAW+C,EAAX,CAAZ,CAAV,CACD,CAfQ,CAeN,CAAC7C,KAAD,CAAQF,QAAR,CAfM,CAAT,CAiBA,GAAMmD,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAA4B,CAC5C,GAAMC,CAAAA,KAAa,CAAG,EAAtB,CACA,GAAMC,CAAAA,YAA8B,CAAG,EAAvC,CACApD,SAAS,CAACqD,OAAV,CAAkB,cAAmB,kCAAjBC,IAAiB,UAAXC,KAAW,UACnC,GAAIA,KAAK,EAAIC,MAAM,CAACC,iBAApB,CAAuC,CACrCN,KAAK,CAACO,IAAN,CAAWJ,IAAX,EACD,CAFD,IAEO,CACLF,YAAY,CAACM,IAAb,CAAkB,CAACJ,IAAD,CAAOC,KAAP,CAAlB,EACD,CACF,CAND,EAQA,MAAO,CACL/C,KAAK,CAAEA,KADF,CAELT,QAAQ,CAAEA,QAFL,CAGLG,cAAc,CAAEA,cAHX,CAILiD,KAAK,CAAEA,KAJF,CAKLC,YAAY,CAAEA,YALT,CAMLnD,KAAK,CAAEA,KANF,CAOL0D,WAAW,CAAEjD,IAPR,CAAP,CASD,CApBD,CAsBA;AAEA,GAAMkD,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,MAAD,CAAyB,CACzCjD,QAAQ,CAAC,CAAEd,IAAI,CAAE,QAAR,CAAkB+D,MAAM,CAAEA,MAA1B,CAAD,CAAR,CACD,CAFD,CAIA,GAAMzD,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,SAAMQ,CAAAA,QAAQ,CAAC,CAAEd,IAAI,CAAE,MAAR,CAAD,CAAd,EAAhB,CAEA,GAAMgE,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACC,IAAD,CAAeR,KAAf,CAAiC,CACxD,GAAMS,CAAAA,GAAG,CAAGxH,mBAAmB,CAACuH,IAAD,CAAOR,KAAP,CAAnB,CAAiCvD,SAAjC,EAA4CH,KAAxD,CACAkB,YAAY,CAACiD,GAAD,CAAZ,CACA5D,OAAO,GACR,CAJD,CAMA,GAAM6D,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAAClB,CAAD,CAAe,CACpC,GAAI7C,cAAc,CAACgE,QAAf,CAAwBnB,CAAxB,CAAJ,CAAgC,CAC9BjC,iBAAiB,CAACZ,cAAc,CAACiE,MAAf,CAAsB,SAAAC,CAAC,QAAIA,CAAAA,CAAC,EAAIrB,CAAT,EAAvB,CAAD,CAAjB,CACD,CAFD,IAEO,CACLjC,iBAAiB,CAACZ,cAAc,CAACmE,MAAf,CAAsBtB,CAAtB,CAAD,CAAjB,CACD,CACF,CAND,CAQA,GAAMuB,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACvBrD,QAAQ,CAAChB,KAAK,CAACoE,MAAN,CAAa,CAAEvE,IAAI,CAAE,OAAR,CAAiBkB,IAAI,CAAE,EAAvB,CAAb,CAAD,CAAR,CACD,CAFD,CAIA,GAAMuD,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,GAAD,CAAiB,CACrCvD,QAAQ,CAAChB,KAAK,CAACkE,MAAN,CAAa,SAAC/C,CAAD,CAAI2B,CAAJ,QAAUyB,CAAAA,GAAG,EAAIzB,CAAjB,EAAb,CAAD,CAAR,CACD,CAFD,CAIA,GAAM0B,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACD,GAAD,CAAcE,IAAd,CAAmC,CACvDzD,QAAQ,CAAChB,KAAK,CAACkB,GAAN,CAAU,SAACwB,CAAD,CAAII,CAAJ,QAAUA,CAAAA,CAAC,EAAIyB,GAAL,CAAWE,IAAX,CAAkB/B,CAA5B,EAAV,CAAD,CAAR,CACD,CAFD,CAIA,GAAMgC,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,CAAC5B,CAAD,CAAe,CAC3CT,gBAAgB,CAACS,CAAD,CAAhB,CACAnC,QAAQ,CAAC,CAAEd,IAAI,CAAE,YAAR,CAAD,CAAR,CACD,CAHD,CAKA,GAAM8E,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACxB,GAAMC,CAAAA,IAAmB,CAAG,CAC1B9E,QAAQ,CAAEA,QADgB,CAE1BG,cAAc,CAAEA,cAFU,CAG1BF,SAAS,CAAEA,SAHe,CAI1BC,KAAK,CAAEA,KAJmB,CAA5B,CAMAuB,UAAU,CAAC,CAACqD,IAAD,EAAOR,MAAP,CAAc9C,OAAd,CAAD,CAAV,CACD,CARD,CAUA,GAAMuD,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACxB,GAAIvD,OAAO,CAACwD,MAAR,CAAiB,CAArB,CAAwB,CACtB,GAAMC,CAAAA,IAAI,CAAGzD,OAAO,CAAC,CAAD,CAApB,CACAC,UAAU,CAACD,OAAO,CAAC0D,KAAR,CAAc,CAAd,CAAD,CAAV,CACApE,WAAW,CAACmE,IAAI,CAACjF,QAAN,CAAX,CACAe,iBAAiB,CAACkE,IAAI,CAAC9E,cAAN,CAAjB,CACAa,YAAY,CAACiE,IAAI,CAAChF,SAAN,CAAZ,CACAiB,QAAQ,CAAC+D,IAAI,CAAC/E,KAAN,CAAR,CACD,CACF,CATD,CAWA;AACA,GAAMiF,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,GAAD,CAAcC,IAAd,CAA+B,CACrD,GAAIvF,KAAK,CAACC,IAAN,GAAe,QAAnB,CAA6B,CAC3B,GAAM+D,CAAAA,MAAM,CAAGhE,KAAK,CAACgE,MAArB,CACA,OAAQA,MAAM,CAAC/D,IAAf,EACE,IAAK,SAAL,CAAgB,CACd,GAAMuF,CAAAA,EAAE,CAAG/I,UAAU,CAACyD,QAAD,CAAWhE,OAAO,CAAC8H,MAAM,CAACsB,GAAR,CAAalJ,YAAY,CAAC4H,MAAM,CAACuB,IAAR,CAAzB,CAAlB,CAA2D,SAAA9B,IAAI,QAAIvH,CAAAA,OAAO,CAACoJ,GAAD,CAAM/I,YAAY,CAACkH,IAAD,CAAO8B,IAAP,CAAlB,CAAX,EAA/D,CAArB,CACAvE,WAAW,CAACwE,EAAD,CAAX,CACA,MACD,CACD,IAAK,MAAL,CAAa,iBACOrJ,UAAU,CAC1BgE,SAD0B,CACf7D,YAAY,CAAC0H,MAAM,CAACE,IAAR,CADG,CAE1BhE,QAF0B,CAEhB,SAAAuD,IAAI,QAAIvH,CAAAA,OAAO,CAACoJ,GAAD,CAAM/I,YAAY,CAACkH,IAAD,CAAO8B,IAAP,CAAlB,CAAX,EAFY,CADjB,4CACJpB,GADI,iBACCqB,GADD,iBAKXxE,WAAW,CAACwE,GAAD,CAAX,CACAtE,YAAY,CAACiD,GAAD,CAAZ,CACA,MACD,CACD,IAAK,MAAL,CAAa,kBACMhI,UAAU,CACzBiE,KADyB,CAClBlE,OAAO,CAAC8H,MAAM,CAACW,GAAR,CAAanI,UAAU,CAACJ,YAAY,CAAC4H,MAAM,CAACyB,IAAR,CAAb,CAAvB,CADW,CAEzBvF,QAFyB,CAEf,SAAAuD,IAAI,QAAIvH,CAAAA,OAAO,CAACoJ,GAAD,CAAM/I,YAAY,CAACkH,IAAD,CAAO8B,IAAP,CAAlB,CAAX,EAFW,CADhB,6CACJtC,EADI,iBACAuC,IADA,iBAKXpE,QAAQ,CAAC6B,EAAD,CAAR,CACAjC,WAAW,CAACwE,IAAD,CAAX,CACA,MACD,CACD,IAAK,KAAL,CAAY,CACV,GAAMA,CAAAA,IAAE,CAAGtJ,OAAO,CAACoJ,GAAD,CAAM/I,YAAY,CAACyH,MAAM,CAACP,IAAR,CAAc8B,IAAd,CAAlB,CAAP,CAA8CrF,QAA9C,EAAwDF,KAAnE,CACAgB,WAAW,CAACwE,IAAD,CAAX,CACA,MACD,CA5BH,CA8BAT,WAAW,GACXxE,OAAO,GACR,CACF,CApCD,CAsCA,GAAMmF,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACzB,GAAI1F,KAAK,CAACC,IAAN,GAAe,QAAnB,CAA6B,CAC3B,GAAM+D,CAAAA,MAAM,CAAGhE,KAAK,CAACgE,MAArB,CACA,OAAQA,MAAM,CAAC/D,IAAf,EACE,IAAK,SAAL,CAAgB,kBACI9D,UAAU,CAC1B+D,QAD0B,CAChBhE,OAAO,CAAC8H,MAAM,CAACsB,GAAR,CAAalJ,YAAY,CAAC4H,MAAM,CAACuB,IAAR,CAAzB,CADS,CAE1BpF,SAF0B,CAEf,SAAAsD,IAAI,QAAIpH,CAAAA,WAAW,CAACoH,IAAD,CAAO,CAAP,CAAf,EAFW,CADd,6CACP+B,EADO,iBACHrB,GADG,iBAKdnD,WAAW,CAACwE,EAAD,CAAX,CACAtE,YAAY,CAACiD,GAAD,CAAZ,CACA,MACD,CACD,IAAK,MAAL,CAAa,CACX,GAAMA,CAAAA,IAAG,CAAG1H,UAAU,CAAC0D,SAAD,CAAY7D,YAAY,CAAC0H,MAAM,CAACE,IAAR,CAAxB,CAAuC,SAAAT,IAAI,QAAIpH,CAAAA,WAAW,CAACoH,IAAD,CAAO,CAAP,CAAf,EAA3C,CAAtB,CACAvC,YAAY,CAACiD,IAAD,CAAZ,CACA,MACD,CACD,IAAK,MAAL,CAAa,kBACOhI,UAAU,CAC1BiE,KAD0B,CACnBlE,OAAO,CAAC8H,MAAM,CAACW,GAAR,CAAanI,UAAU,CAACJ,YAAY,CAAC4H,MAAM,CAACyB,IAAR,CAAb,CAAvB,CADY,CAE1BtF,SAF0B,CAEf,SAAAsD,IAAI,QAAIpH,CAAAA,WAAW,CAACoH,IAAD,CAAO,CAAP,CAAf,EAFW,CADjB,6CACJR,EADI,iBACAkB,KADA,iBAKX/C,QAAQ,CAAC6B,EAAD,CAAR,CACA/B,YAAY,CAACiD,KAAD,CAAZ,CACA,MACD,CACD,IAAK,KAAL,CAAY,CACV,GAAMqB,CAAAA,IAAE,CAAGnJ,WAAW,CAAC2H,MAAM,CAACP,IAAR,CAAc,CAAd,CAAX,CAA4BtD,SAA5B,EAAuCH,KAAlD,CACAkB,YAAY,CAACsE,IAAD,CAAZ,CACA,MACD,CA5BH,CA8BAT,WAAW,GACXxE,OAAO,GAER,CACF,CArCD,CAuCA,GAAMoF,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAChB,GAAD,CAAcc,IAAd,CAA+B,CAClD,GAAIzF,KAAK,CAACC,IAAN,GAAe,QAAnB,CAA6B,CAC3B,GAAM+D,CAAAA,MAAM,CAAGhE,KAAK,CAACgE,MAArB,CACA,OAAQA,MAAM,CAAC/D,IAAf,EACE,IAAK,SAAL,CAAgB,kBACG9D,UAAU,CACzB+D,QADyB,CACfhE,OAAO,CAAC8H,MAAM,CAACsB,GAAR,CAAalJ,YAAY,CAAC4H,MAAM,CAACuB,IAAR,CAAzB,CADQ,CAEzBnF,KAFyB,CAElB,SAAAqD,IAAI,QAAIvH,CAAAA,OAAO,CAACyI,GAAD,CAAMnI,UAAU,CAACD,YAAY,CAACkH,IAAD,CAAOgC,IAAP,CAAb,CAAhB,CAAX,EAFc,CADb,8CACPD,EADO,kBACHvC,EADG,kBAKdjC,WAAW,CAACwE,EAAD,CAAX,CACApE,QAAQ,CAAC6B,EAAD,CAAR,CACA,MACD,CACD,IAAK,MAAL,CAAa,mBACO9G,UAAU,CAC1BgE,SAD0B,CACf7D,YAAY,CAAC0H,MAAM,CAACE,IAAR,CADG,CAE1B9D,KAF0B,CAEnB,SAAAqD,IAAI,QAAIvH,CAAAA,OAAO,CAACyI,GAAD,CAAMnI,UAAU,CAACD,YAAY,CAACkH,IAAD,CAAOgC,IAAP,CAAb,CAAhB,CAAX,EAFe,CADjB,+CACJtB,GADI,kBACClB,GADD,kBAKX/B,YAAY,CAACiD,GAAD,CAAZ,CACA/C,QAAQ,CAAC6B,GAAD,CAAR,CACA,MACD,CACD,IAAK,MAAL,CAAa,CACX,GAAMA,CAAAA,IAAE,CAAGxG,UAAU,CACnB2D,KADmB,CAEnBlE,OAAO,CAAC8H,MAAM,CAACW,GAAR,CAAanI,UAAU,CAACJ,YAAY,CAAC4H,MAAM,CAACyB,IAAR,CAAb,CAAvB,CAFY,CAGnB,SAAAhC,IAAI,QAAIvH,CAAAA,OAAO,CAACyI,GAAD,CAAMnI,UAAU,CAACD,YAAY,CAACkH,IAAD,CAAOgC,IAAP,CAAb,CAAhB,CAAX,EAHe,CAArB,CAKArE,QAAQ,CAAC6B,IAAD,CAAR,CACA,MACD,CACD,IAAK,KAAL,CAAY,CACV,GAAMA,CAAAA,IAAE,CAAG/G,OAAO,CAACyI,GAAD,CAAMnI,UAAU,CAACD,YAAY,CAACyH,MAAM,CAACP,IAAR,CAAcgC,IAAd,CAAb,CAAhB,CAAP,CAA0DrF,KAA1D,EAAiEJ,KAA5E,CACAoB,QAAQ,CAAC6B,IAAD,CAAR,CACA,MACD,CAhCH,CAkCA8B,WAAW,GACXxE,OAAO,GACR,CACF,CAxCD,CA0CA,GAAMqF,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,EAAM,CAC7B,GAAI5F,KAAK,CAACC,IAAN,GAAe,QAAnB,CAA6B,CAC3B,GAAM+D,CAAAA,MAAM,CAAGhE,KAAK,CAACgE,MAArB,CACA,OAAQA,MAAM,CAAC/D,IAAf,EACE,IAAK,SAAL,CAAgB,CACd,GAAMuF,CAAAA,EAAE,CAAGtJ,OAAO,CAAC8H,MAAM,CAACsB,GAAR,CAAalJ,YAAY,CAAC4H,MAAM,CAACuB,IAAR,CAAzB,CAAP,CAA+CrF,QAA/C,EAAyDF,KAApE,CACAgB,WAAW,CAACwE,EAAD,CAAX,CACA,MACD,CACD,IAAK,MAAL,CAAa,CACX,GAAMrB,CAAAA,GAAG,CAAGzH,cAAc,CAACsH,MAAM,CAACE,IAAR,CAAd,CAA4B/D,SAA5B,EAAuCH,KAAnD,CACAkB,YAAY,CAACiD,GAAD,CAAZ,CACA,MACD,CACD,IAAK,MAAL,CAAa,CACX,GAAMlB,CAAAA,EAAE,CAAG/G,OAAO,CAAC8H,MAAM,CAACW,GAAR,CAAanI,UAAU,CAACJ,YAAY,CAAC4H,MAAM,CAACyB,IAAR,CAAb,CAAvB,CAAP,CAA2DrF,KAA3D,EAAkEJ,KAA7E,CACAoB,QAAQ,CAAC6B,EAAD,CAAR,CACA,MACD,CACD,IAAK,KAAL,CAAY,CACV,MACD,CAlBH,CAoBA8B,WAAW,GACXxE,OAAO,GACR,CACF,CA1BD,CA4BA;AACA,GAAMsF,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,IAAD,QAAmB,UACtCC,KADsC,CAEnC,CACH,GACEA,KAAK,CAACC,IAAN,GAAe,SAAf,GACED,KAAD,CAA+BE,GAA/B,GAAuC,KAAvC,EACEF,KAAD,CAA+BE,GAA/B,GAAuC,OAFzC,CADF,CAIE,CACA,OACD,CACDpE,aAAa,CAACiE,IAAD,CAAb,CACD,CAXoB,EAArB,CAaA,GAAMI,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CAC1B,GAAIxF,MAAM,CAACyF,IAAP,GAAgBhD,SAApB,CAA+B,CAC7BiD,KAAK,CAAC,0BAAD,CAAL,CACA1F,MAAM,CAAC2F,OAAP,GACD,CAHD,IAGO,IAAIjG,KAAK,CAAC8E,MAAN,CAAe,CAAf,EACN9E,KAAK,CAACkB,GAAN,CAAU,SAAAwB,CAAC,QAAI9F,CAAAA,eAAe,CAAC8F,CAAD,CAAnB,EAAX,EAAmCwD,KAAnC,CAAyC,SAAAnF,IAAI,QAAI3B,CAAAA,gBAAgB,CAAC2B,IAAD,CAAhB,GAA2BgC,SAA/B,EAA7C,CADM,EAENhD,SAAS,CAAC+E,MAAV,CAAmB,CAFjB,CAEoB,CACvB7C,YAAY,CAAC,IAAD,CAAZ,CACH,CAJM,IAIA,CACL+D,KAAK,CAAC,4BAAD,CAAL,CACD,CACF,CAXD,CAaA;AACA,GAAMG,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,EAAM,CAC7B,GAAMC,CAAAA,IAAI,CAAG,CACXL,IAAI,CAAEzF,MAAM,CAACyF,IADF,CAEXM,KAAK,CAAEpD,SAAS,EAFL,CAAb,CAIAd,WAAW,CAAC,IAAD,CAAX,CACAnF,KAAK,CAACsJ,IAAN,CAAWnJ,KAAK,CAACoJ,eAAjB,CAAkCH,IAAlC,EACGI,IADH,CACQ,iBAAMR,CAAAA,KAAK,CAAC,wBAAD,CAAX,EADR,EAEGS,KAFH,CAES,SAAAC,GAAG,QAAIV,CAAAA,KAAK,CAACU,GAAD,CAAT,EAFZ,EAGGC,OAHH,CAGW,UAAM,CACbxE,WAAW,CAAC,KAAD,CAAX,CACAF,YAAY,CAAC,KAAD,CAAZ,CACD,CANH,EAOD,CAbD,CAeA;AAEA,GAAM2E,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,sBAAM,oBAAC,MAAD,EAAQ,QAAQ,CAAC,QAAjB,eACzB,oBAAC,OAAD,EAAS,KAAK,CAAE,CAAEC,eAAe,CAAE,SAAnB,CAAhB,eACE,oBAAC,UAAD,EAAY,OAAO,CAAC,IAApB,CAAyB,SAAS,CAAExG,OAAO,CAACE,KAA5C,EACGA,KADH,cAEE,oBAAC,OAAD,EAAS,KAAK,CAAC,iCAAf,CAAiD,KAAK,KAAtD,eACE,oBAAC,UAAD,EAAY,OAAO,CAAE,yBAAMwB,CAAAA,aAAa,CAAC,IAAD,CAAnB,EAArB,eACE,oBAAC,QAAD,MADF,CADF,CAFF,CADF,cASE,oBAAC,UAAD,EACE,IAAI,CAAC,OADP,CAEE,SAAS,CAAE1B,OAAO,CAACyG,UAFrB,CAGE,KAAK,CAAC,SAHR,CAIE,aAAW,MAJb,CAKE,OAAO,CAAErB,YAAY,CAAC,IAAD,CALvB,eAOE,oBAAC,QAAD,MAPF,CATF,cAkBE,oBAAC,MAAD,EAAQ,MAAM,CAAC,OAAf,CAAuB,IAAI,CAAEjE,YAA7B,CAA2C,OAAO,CAAEiE,YAAY,CAAC,KAAD,CAAhE,EACGsB,mBAAmB,EADtB,CAlBF,CADyB,CAAN,EAArB,CAyBA,GAAMA,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,EAAmB,CAC7C,GAAMC,CAAAA,IAAI,cAAG,4CACX,oBAAC,IAAD,mBACE,oBAAC,aAAD,EAAe,EAAE,CAAC,GAAlB,eACE,oBAAC,QAAD,EAAU,MAAM,KAAhB,CAAiB,GAAG,CAAC,MAArB,CAA4B,OAAO,CAAE,kBAAM,CAAE,CAA7C,eACE,oBAAC,YAAD,EAAc,OAAO,CAAC,mBAAtB,EADF,CADF,CADF,CADW,CAAb,CASA,MAAOA,CAAAA,IAAP,CACD,CAXD,CAaA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACnE,CAAD,qBAAe,oBAAC,aAAD,EACnC,QAAQ,CAAE,CAAEjD,IAAI,CAAE,SAAR,CAAmBqH,KAAK,CAAEpE,CAA1B,CADyB,CAEnC,KAAK,CAAE,CAF4B,CAGnC,MAAM,CAAE,wBAAMkB,CAAAA,cAAc,CAAClB,CAAD,CAApB,EAH2B,CAInC,QAAQ,CAAE,kBAAAqC,IAAI,QAAIxB,CAAAA,SAAS,CAAC,CAAE9D,IAAI,CAAE,SAAR,CAAmBqF,GAAG,CAAEpC,CAAxB,CAA2BqC,IAAI,CAAEA,IAAjC,CAAD,CAAb,EAJqB,CAKnC,MAAM,CAAE,gBAAAA,IAAI,QAAIF,CAAAA,eAAe,CAACnC,CAAD,CAAIqC,IAAJ,CAAnB,EALuB,EAAf,EAAtB,CAQA,GAAMgC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,SAAMrH,CAAAA,QAAQ,CAACoB,GAAT,CAAa,SAACC,CAAD,CAAI2B,CAAJ,QAAUmE,CAAAA,aAAa,CAACnE,CAAD,CAAvB,EAAb,CAAN,EAAvB,CAEA,GAAMsE,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,sBAAM,oBAAC,UAAD,EACvB,MAAM,CAAE,gBAAAtD,IAAI,QAAIH,CAAAA,SAAS,CAAC,CAAE9D,IAAI,CAAE,MAAR,CAAgBiE,IAAI,CAAEA,IAAtB,CAAD,CAAb,EADW,CAEvB,YAAY,CAAEY,qBAFS,CAGvB,MAAM,CAAEY,YAHe,EAAN,EAAnB,CAMA,GAAM+B,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,sBAC5B,oBAAC,6BAAD,EACE,IAAI,CAAEjF,eADR,CAEE,QAAQ,CAAE,kBAAAkF,CAAC,CAAI,CACbzD,gBAAgB,CAACzB,eAAD,CAAkBkF,CAAlB,CAAhB,CACD,CAJH,EAD4B,EAA9B,CAQA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,sBAAM,oBAAC,YAAD,mBACvB,oBAAC,UAAD,EACE,YAAY,CAAEnG,SADhB,CAEE,QAAQ,CAAE,kBAACmD,GAAD,CAAMc,IAAN,QAAe1B,CAAAA,SAAS,CAAC,CAAE9D,IAAI,CAAE,MAAR,CAAgB0E,GAAG,CAAEA,GAArB,CAA0Bc,IAAI,CAAEA,IAAhC,CAAD,CAAxB,EAFZ,CAGE,MAAM,CAAEE,YAHV,CAIE,QAAQ,CAAE,kBAAAhB,GAAG,QAAI5D,CAAAA,QAAQ,CAAC,CAAEd,IAAI,CAAE,YAAR,CAAsB0E,GAAG,CAAEA,GAA3B,CAAgCiD,OAAO,CAAExH,KAAK,CAACuE,GAAD,CAA9C,CAAD,CAAZ,EAJf,EADuB,CAAN,EAAnB,CASA,GAAMkD,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACxB,mBAAO,+BACJF,UAAU,EADN,cAEL,2BAAK,KAAK,CAAE,CAAEG,KAAK,CAAE,IAAT,CAAeC,SAAS,CAAE,MAA1B,CAAkCC,YAAY,CAAE,MAAhD,CAAwDC,WAAW,CAAE,MAArE,CAA6EC,QAAQ,CAAE,UAAvF,CAAmGC,KAAK,CAAE,GAA1G,CAAZ,eACE,oBAAC,OAAD,EAAS,KAAK,CAAC,gBAAf,CAAgC,aAAW,KAA3C,CAAiD,KAAK,KAAtD,eACE,oBAAC,GAAD,EAAK,KAAK,CAAE,CAAEC,IAAI,CAAE,EAAR,CAAYnB,eAAe,CAAE,SAA7B,CAAwCoB,KAAK,CAAC,MAA9C,CAAZ,CAAoE,OAAO,CAAE5D,UAA7E,eACE,oBAAC,OAAD,EAAS,KAAK,CAAE,CAAE6D,QAAQ,CAAE,IAAZ,CAAhB,EADF,CADF,CADF,cAME,oBAAC,OAAD,EAAS,KAAK,CAAC,sBAAf,CAAsC,aAAW,KAAjD,CAAuD,KAAK,KAA5D,eACE,oBAAC,GAAD,EACE,KAAK,CAAE,CAAEF,IAAI,CAAE,EAAR,CAAYnB,eAAe,CAAE,SAA7B,CAAwCoB,KAAK,CAAC,MAA9C,CAAsDE,MAAM,CAAE,MAA9D,CADT,CAEE,OAAO,CAAE,yBAAM7D,CAAAA,aAAa,CAACtE,KAAK,CAAC8E,MAAN,CAAe,CAAhB,CAAnB,EAFX,eAIE,oBAAC,UAAD,EAAY,KAAK,CAAE,CAAEoD,QAAQ,CAAE,IAAZ,CAAnB,EAJF,CADF,CANF,CAFK,cAiBL,oBAAC,kBAAD,EACE,UAAU,CAAE,oBAAAxF,CAAC,QAAI/B,CAAAA,QAAQ,CAAC,CAACd,IAAI,CAAE,YAAP,CAAqB0E,GAAG,CAAE3E,KAAK,CAACC,IAAN,EAAc,YAAd,CAA6BD,KAAK,CAAC2E,GAAnC,CAAyC,CAAC,CAApE,CAAuEiD,OAAO,CAAE9E,CAAhF,CAAD,CAAZ,EADf,CAEE,WAAW,CAAE,sBAAM,CACjB,GAAI9C,KAAK,CAACC,IAAN,EAAc,YAAlB,CAAgC,CAC9B2E,aAAa,CAAC5E,KAAK,CAAC2E,GAAP,CAAY3E,KAAK,CAAC4H,OAAlB,CAAb,CACD,CACF,CANH,CAOE,UAAU,CAAE,oBAAAjD,GAAG,QAAID,CAAAA,aAAa,CAACC,GAAD,CAAjB,EAPjB,EAjBK,CAAP,CA2BD,CA5BD,CA8BA,GAAM6D,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,sBACvB,oBAAC,MAAD,EACE,IAAI,CAAExG,gBADR,CAEE,OAAO,CAAE,yBAAMC,CAAAA,iBAAiB,CAAC,KAAD,CAAvB,EAFX,CAGE,KAAK,CAAC,aAHR,eAKE,oBAAC,UAAD,EAAY,QAAQ,CAAE/B,QAAtB,EALF,CADuB,EAAzB,CAUA,GAAMuI,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,sBAAM,oBAAC,cAAD,EAC/B,QAAQ,CAAE,kBAAAf,CAAC,QAAI3D,CAAAA,SAAS,CAAC,CAAE9D,IAAI,CAAE,KAAR,CAAewD,IAAI,CAAEiE,CAArB,CAAD,CAAb,EADoB,CAE/B,MAAM,CAAE9B,gBAFuB,EAAN,EAA3B,CAKA,GAAM8C,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,sBACzB,oBAAC,MAAD,EAAQ,IAAI,CAAEtG,SAAd,CAAyB,OAAO,CAAE,yBAAMC,CAAAA,YAAY,CAAC,KAAD,CAAlB,EAAlC,eACE,oBAAC,WAAD,eADF,cAEE,oBAAC,aAAD,iEAEE,oBAAC,QAAD,EAAU,IAAI,CAAE,CAAhB,CAAmB,KAAK,CAAE,CAAEyF,KAAK,CAAE,OAAT,CAAkBa,MAAM,CAAE,OAA1B,CAAmCC,SAAS,CAAE,MAA9C,CAA1B,eACE,oBAAC,YAAD,mBACE,oBAAC,SAAD,EACE,EAAE,CAAC,0BADL,CAEE,KAAK,CAAC,qBAFR,CAGE,SAAS,KAHX,CAIE,YAAY,CAAEC,IAAI,CAACC,SAAL,CAAezF,SAAS,EAAxB,CAJhB,CAKE,UAAU,CAAE,CACV0F,QAAQ,CAAE,IADA,CALd,CAQE,KAAK,CAAE,CAAEH,SAAS,CAAE,MAAb,CART,CASE,OAAO,CAAC,UATV,CAUE,SAAS,KAVX,EADF,CADF,CAFF,CAFF,cAqBE,oBAAC,OAAD,MArBF,cAsBE,+BAAOtG,QAAQ,cAAG,oBAAC,cAAD,MAAH,CAAwBa,SAAvC,CAtBF,cAuBE,oBAAC,aAAD,mBACE,oBAAC,OAAD,EAAS,OAAO,CAAEoD,gBAAlB,YADF,CAvBF,CADyB,EAA3B,CA6BA,GAAMyC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,sBAAM,oBAAC,gBAAD,EACzB,KAAK,CAAE,CADkB,CAEzB,UAAU,KAFe,CAGzB,SAAS,CAAEvI,OAAO,CAACwI,IAHM,CAIzB,KAAK,CAAE,CACLnB,KAAK,CAAE,MADF,CAELI,QAAQ,CAAE,QAFL,CAGLgB,MAAM,CAAE,CAHH,CAJkB,eAUzB,oBAAC,OAAD,EAAS,SAAS,cAAE,oBAAC,QAAD,MAApB,CAAiC,OAAO,CAAEjE,WAA1C,kBAVyB,cAWzB,oBAAC,OAAD,EAAS,SAAS,cAAE,oBAAC,QAAD,MAApB,CAAiC,OAAO,CAAE,yBAAMlD,CAAAA,WAAW,CAAC,IAAD,CAAjB,EAA1C,SAXyB,cAYzB,oBAAC,OAAD,EAAS,SAAS,cAAE,oBAAC,QAAD,MAApB,CAAiC,OAAO,CAAE,yBAAMI,CAAAA,aAAa,CAAC,IAAD,CAAnB,EAA1C,qBAZyB,cAazB,oBAAC,OAAD,EAAS,SAAS,cAAE,oBAAC,YAAD,MAApB,CAAqC,OAAO,CAAE,yBAAMF,CAAAA,iBAAiB,CAAC,IAAD,CAAvB,EAA9C,qBAbyB,cAczB,oBAAC,OAAD,EAAS,SAAS,cAAE,oBAAC,WAAD,MAApB,CAAoC,OAAO,CAAEiE,aAA7C,WAdyB,CAAN,EAArB,CAiBF,GAAMiD,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CAC5B,GAAIxG,aAAa,CAAGD,SAAS,CAACwC,MAAV,CAAmB,CAAvC,CAA0C,CACxCtC,gBAAgB,CAACD,aAAa,CAAG,CAAjB,CAAhB,CACD,CAFD,IAEO,CACLC,gBAAgB,CAAC,CAAD,CAAhB,CACAb,WAAW,CAAC,KAAD,CAAX,CACD,CACF,CAPD,CASA,GAAMqH,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CAC5B,GAAIzG,aAAa,GAAK,CAAtB,CAAyB,CACvBC,gBAAgB,CAACD,aAAa,CAAG,CAAjB,CAAhB,CACD,CACF,CAJD,CAME,mBACE,oBAAC,aAAD,CAAe,QAAf,EAAwB,KAAK,CAAE,CAC7B3C,KAAK,CAAEA,KADsB,CAE7BE,QAAQ,CAAEA,QAFmB,CAG7BC,SAAS,CAAEA,SAHkB,CAI7BC,KAAK,CAAEA,KAJsB,CAK7BC,cAAc,CAAEA,cALa,CAM7BC,SAAS,CAAEA,SANkB,CAO7BC,OAAO,CAAEA,OAPoB,CAA/B,eASE,+BACGyG,YAAY,EADf,CAEGO,cAAc,EAFjB,cAGE,oBAAC,OAAD,EAAS,KAAK,CAAE,CAAEgB,MAAM,CAAE,MAAV,CAAhB,EAHF,cAIE,oBAAC,IAAD,EAAM,SAAS,KAAf,eACE,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,CAAf,eACE,oBAAC,QAAD,EAAU,IAAI,CAAE,CAAhB,CAAmB,KAAK,CAAE,CAAEc,QAAQ,CAAE,QAAZ,CAAsBC,SAAS,CAAE,eAAjC,CAAkDX,MAAM,CAAE,OAA1D,CAA1B,EACGd,WAAW,EADd,CADF,CADF,cAME,oBAAC,OAAD,EAAS,WAAW,CAAC,UAArB,CAAgC,QAAQ,KAAxC,EANF,cAOE,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,CAAf,eACE,oBAAC,QAAD,EAAU,IAAI,CAAE,CAAhB,CAAmB,KAAK,CAAE,CAAEwB,QAAQ,CAAE,QAAZ,CAAsBC,SAAS,CAAE,eAAjC,CAAkDX,MAAM,CAAE,OAA1D,CAA1B,EACGnB,UAAU,EADb,CADF,CAPF,cAYE,oBAAC,OAAD,EAAS,WAAW,CAAC,UAArB,CAAgC,QAAQ,KAAxC,EAZF,cAaE,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,YAAY,CAAC,QAAxB,EACGiB,kBAAkB,EADrB,CAbF,CAJF,CAqBGO,YAAY,EArBf,CAsBGN,kBAAkB,EAtBrB,CAuBGjB,qBAAqB,EAvBxB,CAwBGe,gBAAgB,EAxBnB,cAyBE,oBAAC,kBAAD,EACE,IAAI,CAAEtG,YADR,CAEE,KAAK,CAAEvB,KAFT,CAGE,IAAI,CAAEE,IAHR,CAIE,QAAQ,CAAE,kBAACF,KAAD,CAAQE,IAAR,CAAiB,CACzBD,QAAQ,CAACD,KAAD,CAAR,CACAG,OAAO,CAACD,IAAD,CAAP,CACD,CAPH,CAQE,QAAQ,CAAE,0BAAMsB,CAAAA,aAAa,CAAC,KAAD,CAAnB,EARZ,EAzBF,CATF,cA6CE,oBAAC,MAAD,EAAQ,IAAI,CAAEL,UAAd,CAA0B,OAAO,CAAE,yBAAMC,CAAAA,WAAW,CAAC,KAAD,CAAjB,EAAnC,eACI,oBAAC,WAAD,EAAa,KAAK,CAAE,CAAC+F,KAAK,CAAC,QAAP,CAApB,cADJ,cAEI,oBAAC,aAAD,mBACE,oBAAC,IAAD,mBACE,oBAAC,IAAD,CAAM,KAAN,MAAapF,SAAS,CAACC,aAAD,CAAtB,CADF,CADF,CAFJ,cAOI,oBAAC,aAAD,mBACE,oBAAC,MAAD,EAAQ,OAAO,CAAEyG,eAAjB,CAAkC,KAAK,CAAE,CAACnB,WAAW,CAAC,KAAb,CAAoBhB,eAAe,CAAEtE,aAAa,EAAI,CAAjB,CAAqB,MAArB,CAA8B,SAAnE,CAA8E4G,WAAW,CAAC,KAA1F,CAAzC,WADF,cAEE,2BAAK,KAAK,CAAE,CAACtB,WAAW,CAAC,KAAb,CAAZ,EAAkCtF,aAAa,CAAG,CAAlD,KAAsDD,SAAS,CAACwC,MAAhE,CAFF,cAGE,oBAAC,MAAD,EAAQ,OAAO,CAAEiE,eAAjB,CAAkC,KAAK,CAAE,CAAClB,WAAW,CAAC,IAAb,CAAmBhB,eAAe,CAAEtE,aAAa,EAAID,SAAS,CAACwC,MAAV,CAAmB,CAApC,CAAwC,MAAxC,CAAiD,SAArF,CAAgGqE,WAAW,CAAC,KAA5G,CAAzC,WAHF,CAPJ,CA7CF,CADF,CA8DD,CAtjBM","sourcesContent":["import React, { useContext, useState, useEffect } from 'react'\nimport { LoginContext } from '../../LoginContext'\nimport { Premise, GoalInJSON, Card, Goal, LevelSetupJsonFormat } from '../../types'\nimport { useStyles } from '../appbar'\nimport { \n  onIndex, \n  moveFromTo, \n  deleteCardAt, \n  addHandCard, \n  getAHandCard, \n  insertCardTo, \n  onGoalJson, \n  moveWithin, \n  deleteHandCard, \n  changeCountHandCard } from './editorUtils'\nimport { EditorPremise } from './EditorPremise'\nimport { EditorHand } from './EditorHand'\nimport { BoolTree } from '../../server/gameApp/logicResolver/bools'\nimport AppBar from '@material-ui/core/AppBar/AppBar'\nimport { fromGoalJson, parseGoalTreeSafe, getExprFromJson } from '../../server/gameApp/game/goal'\nimport { evalSuccess } from '../../game/views'\nimport { EditorGoal } from './EditorGoals'\nimport { EditorAllCards } from './EditorAllCards'\nimport Axios, { AxiosRequestConfig } from 'axios'\nimport { Table, Button, Modal, Form } from 'react-bootstrap'\nimport { Paths } from '../../routesPaths'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogTitle from '@material-ui/core/DialogTitle/DialogTitle'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogActions from '@material-ui/core/DialogActions'\nimport MButton from '@material-ui/core/Button'\nimport Divider from '@material-ui/core/Divider'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport Typography from '@material-ui/core/Typography'\nimport IconButton from '@material-ui/core/IconButton'\nimport Drawer from '@material-ui/core/Drawer'\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport { LinkContainer } from 'react-router-bootstrap'\nimport MenuIcon from '@material-ui/icons/Menu'\nimport AddIcon from '@material-ui/icons/Add'\nimport EditIcon from '@material-ui/icons/Edit'\nimport UndoIcon from '@material-ui/icons/Undo'\nimport RemoveIcon from '@material-ui/icons/Remove'\nimport FeedbackIcon from '@material-ui/icons/Feedback'\nimport PublishIcon from '@material-ui/icons/Publish'\nimport HelpIcon from '@material-ui/icons/Help'\nimport { ChangeGoalDialogue } from './ChangeGoalDialogue'\nimport { Fab, Grid, Tooltip, GridList, GridListTile, BottomNavigation, TextField, LinearProgress } from '@material-ui/core'\nimport { EditorModifyCardCountDialogue } from './EditorModifyCardCount'\nimport { parsePremiseSafe } from '../../server/gameApp/game/premise'\nimport { DescEditorDialogue } from './DescEditorDialogue'\nimport { TruthTable } from '../game/Truthtable'\nimport TUTORIAL_1 from \"../../src_img/tutorial/HELP_1.gif\"\nimport TUTORIAL_2 from \"../../src_img/tutorial/HELP_2.gif\"\nimport TUTORIAL_3 from \"../../src_img/tutorial/HELP_3.gif\"\n\n\ntype EditorState = { kind: 'idle' }\n                 | { kind: 'changeHand' }\n                 | { kind: 'select', select: SelectState }\n                 | { kind: 'changeGoal', gid: number, newGoal: GoalInJSON }\n\ntype SelectState = { kind: 'premise', pid: number, ppos: number }\n                 | { kind: 'hand', hpos: number }\n                 | { kind: 'goal', gid: number, gpos: number }\n                 | { kind: 'all', card: Card }\n\ninterface EditorHistory {\n  premises: Premise[]\n  lockedPremises: number[]\n  handCards: [Card, number][]\n  goals: GoalInJSON[]\n}\n\ntype EditorContexts = {\n  state: EditorState\n  premises: Premise[]\n  handCards: [Card, number][]\n  goals: GoalInJSON[]\n  goalTrees: (BoolTree | undefined)[]\n  lockedPremises: number[]\n  setIdle: () => void\n}\n\n\nexport const EditorContext = React.createContext<EditorContexts>({\n  state: { kind: 'idle' },\n  premises: [],\n  handCards: [],\n  goals: [],\n  lockedPremises: [],\n  goalTrees: [],\n  setIdle: () => {}\n})\n\nexport const LevelEditor = () => {\n  const classes = useStyles()\n  const logins = useContext(LoginContext)\n\n  const [title, setTitle] = useState(\"A new level\")\n  const [desc, setDesc] = useState<string[]>([])\n  const [state, setState] = useState<EditorState>({ kind: 'idle' })\n  const [premises, setPremises] = useState<Premise[]>([[], [], [], []])\n  const [lockedPremises, setLockedPremises] = useState<number[]>([0,2,3])\n  const [handCards, setHandCards] = useState<[Card, number][]>([])\n  const [goals, setGoals] = useState<GoalInJSON[]>([{ kind: 'prove', expr: ['A']}])\n  const [goalTrees, setGoalTrees] = useState<(BoolTree|undefined)[]>([])\n  const [isSuccess, setSuccess] = useState<boolean[]>(premises.map(_ => false))\n  const [history, setHistory] = useState<EditorHistory[]>([])\n\n  const [isShowDrawer, setShowDrawer] = useState(false)\n  const [isShowHelp, setShowHelp] = useState(false)\n  const [isShowTruthTable, setShowTruthTable] = useState(false)\n  const [isChangeDesc, setChangeDesc] = useState(false)\n  const [onConfirm, setOnConfirm] = useState(false)\n  const [onSubmit, setOnSubmit] = useState(false)\n  const [onModifyCardPos, setModifyCardPos] = useState<number>(0)\n\n  const tutorials: object[] = [\n  <div><Form><Form.Label>How to unselect a card?</Form.Label></Form><img src={TUTORIAL_1} width=\"500\"/></div>,\n  <div>\n    <Form>\n      <Form.Label>Locked premise: available for player to modify.</Form.Label>\n      <Form.Label>Unlocked premise: player can only read without modify.</Form.Label>\n    </Form>\n    <img src={TUTORIAL_2} width=\"500\"/></div>,\n  <div><Form><Form.Label>How to unlock a premise?</Form.Label></Form><img src={TUTORIAL_3} width=\"500\"/></div>]\n  const [tutorialIndex, setTutorialIndex] = useState(0)\n \n  // set goalTrees on goals change\n  useEffect(() => {\n    const trees = goals.map(g => parseGoalTreeSafe(g))\n    setGoalTrees(trees)\n    console.log(trees)\n    \n    const gs: (Goal | undefined)[] = goals.map((g, i) => { \n      switch (g.kind) {\n        case 'paradox':\n        case 'tautology':\n          return { kind: g.kind, expr: undefined, boolTree: undefined }      \n        default:\n          return trees[i] ? { kind: g.kind, expr: g.expr, boolTree: trees[i]! } : undefined\n      }\n    })\n    setSuccess(evalSuccess(premises, gs))\n  }, [goals, premises])\n\n  const evictJson = (): LevelSetupJsonFormat => {\n    const cards: Card[] = []\n    const limitedCards: [Card, number][] = []\n    handCards.forEach(([card, count]) => {\n      if (count == Number.POSITIVE_INFINITY) {\n        cards.push(card)\n      } else {\n        limitedCards.push([card, count])\n      }\n    })\n\n    return {\n      title: title,\n      premises: premises,\n      lockedPremises: lockedPremises,  \n      cards: cards,\n      limitedCards: limitedCards,\n      goals: goals,\n      description: desc\n    }\n  }\n\n  // state handlers\n\n  const setSelect = (select: SelectState) => {\n    setState({ kind: 'select', select: select })\n  }\n\n  const setIdle = () => setState({ kind: 'idle' })\n\n  const setHandCardCount = (hpos: number, count: number) => {\n    const hcs = changeCountHandCard(hpos, count)(handCards).state\n    setHandCards(hcs)\n    setIdle()\n  }\n\n  const setLockPremise = (i: number) => {\n    if (lockedPremises.includes(i)) {\n      setLockedPremises(lockedPremises.filter(j => j != i))\n    } else {\n      setLockedPremises(lockedPremises.concat(i))\n    }\n  }\n\n  const setAddGoal = () => {\n    setGoals(goals.concat({ kind: 'prove', expr: [] }))    \n  }\n\n  const setRemoveGoal = (gid: number) => {\n    setGoals(goals.filter((_, i) => gid != i))\n  }\n\n  const setModifyGoal = (gid: number, goal: GoalInJSON) => {\n    setGoals(goals.map((g, i) => i == gid ? goal : g))\n  }\n\n  const setOpenHandCardEditor = (i: number) => {\n    setModifyCardPos(i)\n    setState({ kind: 'changeHand' })\n  }\n\n  const pushHistory = () => {\n    const curr: EditorHistory = {\n      premises: premises,\n      lockedPremises: lockedPremises,\n      handCards: handCards,\n      goals: goals\n    }\n    setHistory([curr].concat(history))\n  }\n\n  const undoHistory = () => {\n    if (history.length > 0) {\n      const last = history[0]\n      setHistory(history.slice(1))\n      setPremises(last.premises)\n      setLockedPremises(last.lockedPremises)\n      setHandCards(last.handCards)\n      setGoals(last.goals)\n    }\n  }\n\n  // Drop event handlers\n  const onDropToPremise = (pid: number, ppos: number) => {\n    if (state.kind === 'select') {\n      const select = state.select\n      switch (select.kind) {\n        case 'premise': {\n          const ps = moveWithin(premises, onIndex(select.pid, deleteCardAt(select.ppos)), card => onIndex(pid, insertCardTo(card, ppos)))\n          setPremises(ps)\n          break\n        } \n        case 'hand': {\n          const [hcs, ps] = moveFromTo(\n            handCards, getAHandCard(select.hpos), \n            premises, card => onIndex(pid, insertCardTo(card, ppos))\n          )\n          setPremises(ps)\n          setHandCards(hcs)\n          break\n        }\n        case 'goal': {\n          const [gs, ps] = moveFromTo(\n            goals, onIndex(select.gid, onGoalJson(deleteCardAt(select.gpos))),\n            premises, card => onIndex(pid, insertCardTo(card, ppos))\n          )\n          setGoals(gs)\n          setPremises(ps)\n          break\n        }\n        case 'all': {\n          const ps = onIndex(pid, insertCardTo(select.card, ppos))(premises).state\n          setPremises(ps)\n          break\n        }\n      }\n      pushHistory()\n      setIdle()\n    }\n  }\n\n  const onDropToHand = () => {\n    if (state.kind === 'select') {\n      const select = state.select\n      switch (select.kind) {\n        case 'premise': {\n          const [ps, hcs] = moveFromTo(\n            premises, onIndex(select.pid, deleteCardAt(select.ppos)), \n            handCards, card => addHandCard(card, 1)\n          )\n          setPremises(ps)\n          setHandCards(hcs)\n          break\n        } \n        case 'hand': {\n          const hcs = moveWithin(handCards, getAHandCard(select.hpos), card => addHandCard(card, 1))\n          setHandCards(hcs)\n          break\n        }\n        case 'goal': {\n          const [gs, hcs] = moveFromTo(\n            goals, onIndex(select.gid, onGoalJson(deleteCardAt(select.gpos))),\n            handCards, card => addHandCard(card, 1)\n          )\n          setGoals(gs)\n          setHandCards(hcs)\n          break\n        }\n        case 'all': {\n          const ps = addHandCard(select.card, 1)(handCards).state\n          setHandCards(ps)\n          break\n        }\n      }\n      pushHistory()\n      setIdle()\n\n    }\n  }\n\n  const onDropToGoal = (gid: number, gpos: number) => {\n    if (state.kind === 'select') {\n      const select = state.select\n      switch (select.kind) {\n        case 'premise': {\n          const [ps, gs] = moveFromTo(\n            premises, onIndex(select.pid, deleteCardAt(select.ppos)), \n            goals, card => onIndex(gid, onGoalJson(insertCardTo(card, gpos)))\n          )\n          setPremises(ps)\n          setGoals(gs)\n          break\n        } \n        case 'hand': {\n          const [hcs, gs] = moveFromTo(\n            handCards, getAHandCard(select.hpos), \n            goals, card => onIndex(gid, onGoalJson(insertCardTo(card, gpos)))\n          )\n          setHandCards(hcs)\n          setGoals(gs)\n          break\n        }\n        case 'goal': {\n          const gs = moveWithin(\n            goals, \n            onIndex(select.gid, onGoalJson(deleteCardAt(select.gpos))), \n            card => onIndex(gid, onGoalJson(insertCardTo(card, gpos)))\n          )\n          setGoals(gs)\n          break\n        }\n        case 'all': {\n          const gs = onIndex(gid, onGoalJson(insertCardTo(select.card, gpos)))(goals).state\n          setGoals(gs)\n          break\n        }\n      }\n      pushHistory()\n      setIdle()\n    }\n  }\n\n  const onDropToAllCards = () => {\n    if (state.kind === 'select') {\n      const select = state.select\n      switch (select.kind) {\n        case 'premise': {\n          const ps = onIndex(select.pid, deleteCardAt(select.ppos))(premises).state\n          setPremises(ps)\n          break\n        } \n        case 'hand': {\n          const hcs = deleteHandCard(select.hpos)(handCards).state\n          setHandCards(hcs)\n          break\n        }\n        case 'goal': {\n          const gs = onIndex(select.gid, onGoalJson(deleteCardAt(select.gpos)))(goals).state\n          setGoals(gs)\n          break\n        }\n        case 'all': {\n          break\n        }\n      }\n      pushHistory()\n      setIdle()\n    }\n  }\n\n  // misc actions\n  const toggleDrawer = (open: boolean) => (\n    event: React.KeyboardEvent | React.MouseEvent,\n  ) => {\n    if (\n      event.type === 'keydown' &&\n      ((event as React.KeyboardEvent).key === 'Tab' ||\n        (event as React.KeyboardEvent).key === 'Shift')\n    ) {\n      return\n    }\n    setShowDrawer(open)\n  } \n\n  const toggleConfirm = () => {\n    if (logins.user === undefined) {\n      alert(\"You need to login first!\")\n      logins.onLogin()\n    } else if (goals.length > 0 \n      && goals.map(g => getExprFromJson(g)).every(expr => parsePremiseSafe(expr) !== undefined)\n      && handCards.length > 0) {\n        setOnConfirm(true)\n    } else {\n      alert(\"This is not a valid level!\")\n    }\n  }\n\n  // post to server\n  const postJsonToServer = () => {\n    const data = {\n      user: logins.user,\n      level: evictJson() \n    }\n    setOnSubmit(true)\n    Axios.post(Paths.submitLevelJson, data)\n      .then(() => alert(\"Submission successful!\"))\n      .catch(err => alert(err))\n      .finally(() => {\n        setOnSubmit(false)\n        setOnConfirm(false)\n      })\n  }\n\n  // rendering\n\n  const renderAppBar = () => <AppBar position=\"static\">\n    <Toolbar style={{ backgroundColor: '#F2994A'}}>\n      <Typography variant=\"h6\" className={classes.title}>\n        {title}\n        <Tooltip title=\"Edit level name and description\" arrow>\n          <IconButton onClick={() => setChangeDesc(true)}>\n            <EditIcon/>\n          </IconButton>\n        </Tooltip>\n      </Typography>\n      <IconButton \n        edge=\"start\" \n        className={classes.menuButton} \n        color=\"inherit\" \n        aria-label=\"menu\"\n        onClick={toggleDrawer(true)}\n      >\n        <MenuIcon />\n      </IconButton>\n      <Drawer anchor=\"right\" open={isShowDrawer} onClose={toggleDrawer(false)}>\n        {renderDrawerContent()}\n      </Drawer>\n    </Toolbar>\n  </AppBar>\n\n  const renderDrawerContent = (): JSX.Element => {\n    const menu = <div>\n      <List>\n        <LinkContainer to='/'>\n          <ListItem button key=\"menu\" onClick={() => {}}>\n            <ListItemText primary=\"Back to Main Menu\"/>\n          </ListItem>\n        </LinkContainer>\n      </List>\n    </div>\n    return menu\n  }\n\n  const renderPremise = (i: number) => <EditorPremise \n    category={{ kind: 'premise', index: i }} \n    scale={1} \n    onLock={() => setLockPremise(i)}\n    onSelect={ppos => setSelect({ kind: 'premise', pid: i, ppos: ppos })}\n    onDrop={ppos => onDropToPremise(i, ppos)}\n  />\n\n  const renderPremises = () => premises.map((_, i) => renderPremise(i))\n\n  const renderHand = () => <EditorHand\n    onPick={hpos => setSelect({ kind: 'hand', hpos: hpos})}\n    onClickOnTag={setOpenHandCardEditor}\n    onDrop={onDropToHand}\n  />\n\n  const renderModifyCardCount = () => \n    <EditorModifyCardCountDialogue\n      hpos={onModifyCardPos}\n      onSubmit={c => {\n        setHandCardCount(onModifyCardPos, c)\n      }}\n    />  \n\n  const renderGoal = () => <GridListTile>\n    <EditorGoal\n      isSuccessful={isSuccess}\n      onSelect={(gid, gpos) => setSelect({ kind: 'goal', gid: gid, gpos: gpos})}\n      onDrop={onDropToGoal}\n      onChange={gid => setState({ kind: 'changeGoal', gid: gid, newGoal: goals[gid] })}\n    />\n  </GridListTile>\n\n  const renderGoals = () => {\n    return <div>\n      {renderGoal()}\n      <div style={{ width: '40', textAlign: 'left', marginBottom: '20px', marginRight: '70px', position: 'absolute', right: '0'}}>\n        <Tooltip title=\"Add a new goal\" aria-label=\"add\" arrow>\n          <Fab style={{ left: 40, backgroundColor: '#F2994A', color:'#fff' }} onClick={setAddGoal}>\n            <AddIcon style={{ fontSize: '30' }}/>\n          </Fab>\n        </Tooltip>\n        <Tooltip title=\"Delete the last goal\" aria-label=\"del\" arrow>\n          <Fab \n            style={{ left: 40, backgroundColor: '#A359A3', color:'#fff', margin: '20px' }} \n            onClick={() => setRemoveGoal(goals.length - 1)}\n          >\n            <RemoveIcon style={{ fontSize: '30' }}/>\n          </Fab>\n        </Tooltip>\n      </div>\n      <ChangeGoalDialogue\n        updateGoal={g => setState({kind: 'changeGoal', gid: state.kind == 'changeGoal' ? state.gid : -1, newGoal: g })}\n        confirmGoal={() => {\n          if (state.kind == 'changeGoal') {\n            setModifyGoal(state.gid, state.newGoal)\n          }\n        }}\n        deleteGoal={gid => setRemoveGoal(gid)}\n      />\n    </div>\n  }\n\n  const renderTruthTable = () => (\n    <Dialog \n      open={isShowTruthTable} \n      onClose={() => setShowTruthTable(false)} \n      title=\"Truth Table\"\n    >\n      <TruthTable premises={premises}/>\n    </Dialog>\n  )\n\n  const renderAllCardsList = () => <EditorAllCards\n    onSelect={c => setSelect({ kind: 'all', card: c })}\n    onDrop={onDropToAllCards}\n  />\n\n  const renderConfirmation = () => \n    <Dialog open={onConfirm} onClose={() => setOnConfirm(false)}>\n      <DialogTitle>Submit</DialogTitle>\n      <DialogContent>\n        Are you sure you want to submit your level?\n        <GridList cols={1} style={{ width: '300px', height: '200px', marginTop: '10px'}}>\n          <GridListTile>\n            <TextField\n              id=\"outlined-read-only-input\"\n              label=\"Level Setup in JSON\"\n              multiline\n              defaultValue={JSON.stringify(evictJson())}\n              InputProps={{\n                readOnly: true,\n              }}\n              style={{ marginTop: '20px'}}\n              variant=\"outlined\"\n              fullWidth\n            />\n          </GridListTile>\n        </GridList>\n      </DialogContent>\n      <Divider/>\n      <div>{ onSubmit ? <LinearProgress /> : undefined }</div>\n      <DialogActions>\n        <MButton onClick={postJsonToServer}>Confirm</MButton>\n      </DialogActions>\n    </Dialog>\n\n  const renderFooter = () => <BottomNavigation\n    value={0}\n    showLabels\n    className={classes.root}\n    style={{\n      width: '100%',\n      position: 'sticky',\n      bottom: 0,\n    }}\n  > \n    <MButton startIcon={<UndoIcon/>} onClick={undoHistory}>UNDO ONE STEP</MButton>  \n    <MButton startIcon={<HelpIcon/>} onClick={() => setShowHelp(true)}>HELP</MButton>  \n    <MButton startIcon={<EditIcon/>} onClick={() => setChangeDesc(true)}>EDIT DESCRIPTION</MButton>  \n    <MButton startIcon={<FeedbackIcon/>} onClick={() => setShowTruthTable(true)}>SHOW TRUTH TABLE</MButton>  \n    <MButton startIcon={<PublishIcon/>} onClick={toggleConfirm}>SUBMIT</MButton>  \n  </BottomNavigation>\n\nconst setNextTutorial = () => {\n  if (tutorialIndex < tutorials.length - 1) {\n    setTutorialIndex(tutorialIndex + 1)\n  } else {\n    setTutorialIndex(0)\n    setShowHelp(false)\n  }\n}\n\nconst setPrevTutorial = () => {\n  if (tutorialIndex !== 0) {\n    setTutorialIndex(tutorialIndex - 1)\n  }\n}\n\n  return (\n    <EditorContext.Provider value={{\n      state: state,\n      premises: premises,\n      handCards: handCards,\n      goals: goals,\n      lockedPremises: lockedPremises,\n      goalTrees: goalTrees,\n      setIdle: setIdle\n    }}>\n      <div>\n        {renderAppBar()}\n        {renderPremises()}\n        <Divider style={{ margin: '10px' }}/>\n        <Grid container>\n          <Grid item xs={4}>\n            <GridList cols={1} style={{ flexWrap: 'nowrap', transform: 'translateZ(0)', height: '220px'}}>\n              {renderGoals()}\n            </GridList>\n          </Grid>\n          <Divider orientation=\"vertical\" flexItem />\n          <Grid item xs={4}>\n            <GridList cols={1} style={{ flexWrap: 'nowrap', transform: 'translateZ(0)', height: '220px'}}>\n              {renderHand()}\n            </GridList>\n          </Grid>\n          <Divider orientation=\"vertical\" flexItem />\n          <Grid item alignContent='center'>\n            {renderAllCardsList()}\n          </Grid>\n        </Grid>\n        {renderFooter()}\n        {renderConfirmation()}\n        {renderModifyCardCount()}\n        {renderTruthTable()}\n        <DescEditorDialogue\n          open={isChangeDesc}\n          title={title}\n          desc={desc}\n          onSubmit={(title, desc) => {\n            setTitle(title)\n            setDesc(desc)\n          }}\n          onCancel={() => setChangeDesc(false)}\n        />\n      </div>\n      <Dialog open={isShowHelp} onClose={() => setShowHelp(false)}>\n          <DialogTitle style={{width:\"1000px\"}}>Tutorials</DialogTitle>\n          <DialogContent>\n            <Form>\n              <Form.Label>{tutorials[tutorialIndex]}</Form.Label>\n            </Form>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={setPrevTutorial} style={{marginRight:\"38%\", backgroundColor: tutorialIndex == 0 ? '#CCC' : \"#307df7\", borderWidth:\"0px\"}}>←</Button>\n            <div style={{marginRight:\"38%\"}}>{tutorialIndex + 1}/{tutorials.length}</div>\n            <Button onClick={setNextTutorial} style={{marginRight:\"2%\", backgroundColor: tutorialIndex == tutorials.length - 1 ? '#CCC' : \"#307df7\", borderWidth:\"0px\"}}>→</Button>\n          </DialogActions>\n        </Dialog>\n    </EditorContext.Provider>\n  )\n  \n}"]},"metadata":{},"sourceType":"module"}