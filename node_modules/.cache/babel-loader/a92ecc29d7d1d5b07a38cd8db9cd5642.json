{"ast":null,"code":"import _slicedToArray from\"/Users/johnny/IC/Computing/year2/DRP/drp48/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import'./App.css';import'bootstrap/dist/css/bootstrap.css';import{Route}from'react-router-dom';import{Entry}from'./components/entry/Entry';import{LevelPage}from'./components/entry/LevelPage';import{LoginContext}from'./LoginContext';import{LevelEditor}from'./components/editor/LevelEditor';import{Arena}from'./components/arena/Arena';import{SinglePlayerLevelBoard}from'./components/game/SinglePlayerLevelBoard';import{ArenaLevelBoard}from'./components/game/ArenaLevelBoard';import{RegisterDialogue}from'./components/auth/Register';import{LoginDialogue}from'./components/auth/Login';import{LogoutDialogue}from'./components/auth/Logout';import{UserPage}from'./components/user/UserPage';import Axios from'axios';import{Paths}from'./routesPaths';function App(){var _useState=useState(\"hide\"),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var _useState3=useState(undefined),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];useEffect(function(){var item=localStorage.getItem(\"user\");if(item){setUser(JSON.parse(item));}else{setUser(undefined);}},[]);var handleClose=function handleClose(){setShow(\"hide\");};var passLevel=function passLevel(user){return function(levelID){if(user){if(levelID>user.levelFinished){user.levelFinished=levelID;setUser(user);var config={params:{lid:levelID,uname:user.username}};Axios.post(Paths.levelSubmit,config);}}};};return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(LoginContext.Provider,{value:{user:user,toggleSetUser:function toggleSetUser(u){setUser(u);if(u){localStorage.setItem('user',JSON.stringify(u));}else{localStorage.removeItem('user');}},toggleLogout:function toggleLogout(){setUser(undefined);localStorage.removeItem('user');},onLogin:function onLogin(){return setShow('login');},onSignup:function onSignup(){return setShow('signup');},onHide:function onHide(){return setShow('hide');},onLogout:function onLogout(){return setShow('logout');},passLevel:passLevel(user)}},/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/\",component:Entry}),/*#__PURE__*/React.createElement(Route,{path:\"/levelPage/:sid\",component:LevelPage}),/*#__PURE__*/React.createElement(Route,{path:\"/level/:sid/:levelID\",component:SinglePlayerLevelBoard}),/*#__PURE__*/React.createElement(Route,{path:\"/editor\",component:LevelEditor}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/arena\",component:Arena}),/*#__PURE__*/React.createElement(Route,{path:\"/arena/level/:lid\",component:ArenaLevelBoard}),/*#__PURE__*/React.createElement(Route,{path:\"/user/:uid\",component:UserPage}),/*#__PURE__*/React.createElement(RegisterDialogue,{open:show==\"signup\",onClose:handleClose,onSwitchToLogin:function onSwitchToLogin(){return setShow(\"login\");}}),/*#__PURE__*/React.createElement(LoginDialogue,{open:show==\"login\",onClose:handleClose,onSwitchToSignup:function onSwitchToSignup(){return setShow(\"signup\");}}),/*#__PURE__*/React.createElement(LogoutDialogue,{open:show==\"logout\"})));}export default App;","map":{"version":3,"sources":["/Users/johnny/IC/Computing/year2/DRP/drp48/src/App.tsx"],"names":["React","useState","useEffect","Route","Entry","LevelPage","LoginContext","LevelEditor","Arena","SinglePlayerLevelBoard","ArenaLevelBoard","RegisterDialogue","LoginDialogue","LogoutDialogue","UserPage","Axios","Paths","App","show","setShow","undefined","user","setUser","item","localStorage","getItem","JSON","parse","handleClose","passLevel","levelID","levelFinished","config","params","lid","uname","username","post","levelSubmit","toggleSetUser","u","setItem","stringify","removeItem","toggleLogout","onLogin","onSignup","onHide","onLogout"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport {BrowserRouter as Router, Switch, Route, Redirect} from 'react-router-dom';\nimport { Entry } from './components/entry/Entry';\nimport { LevelPage } from './components/entry/LevelPage';\nimport { UserCredential, UserInfo } from './types';\nimport { LoginContext } from './LoginContext';\nimport { LevelEditor } from './components/editor/LevelEditor';\nimport { Arena } from './components/arena/Arena';\nimport { SinglePlayerLevelBoard } from './components/game/SinglePlayerLevelBoard';\nimport { ArenaLevelBoard } from './components/game/ArenaLevelBoard';\nimport { RegisterDialogue } from './components/auth/Register';\nimport { LoginDialogue } from './components/auth/Login';\nimport { LogoutDialogue } from './components/auth/Logout';\nimport { UserPage } from './components/user/UserPage';\nimport Axios, { AxiosRequestConfig } from 'axios';\nimport { Paths } from './routesPaths';\n\ntype DialogState = \"hide\" | \"login\" | \"signup\" | \"logout\";\n\nfunction App() {\n  const [show, setShow] = useState<DialogState>(\"hide\");\n  const [user, setUser] = useState<UserInfo | undefined>(undefined)\n\n\n  useEffect(() => {\n    const item = localStorage.getItem(\"user\");\n    if (item) {\n      setUser(JSON.parse(item));\n    } else {\n      setUser(undefined);\n    }\n  }, []);\n\n  const handleClose = () => {\n    setShow(\"hide\");\n  };\n\n  const passLevel = (user: UserInfo | undefined) => (levelID: number) => {\n    if (user) {\n      if (levelID > user.levelFinished) {\n        user.levelFinished = levelID\n        setUser(user)\n        const config: AxiosRequestConfig = {\n          params: { lid: levelID, uname: user.username }\n        }\n        Axios.post(Paths.levelSubmit, config)\n      }\n    }\n  }\n\n  return (\n    <div className=\"App\">\n      <LoginContext.Provider value={{ \n        user: user, \n        toggleSetUser: u => { \n          setUser(u)\n          if (u) {\n            localStorage.setItem('user', JSON.stringify(u)) \n          } else {\n            localStorage.removeItem('user')\n          }\n        },\n        toggleLogout: () => { setUser(undefined); localStorage.removeItem('user') },\n        onLogin: () => setShow('login'),\n        onSignup: () => setShow('signup'),\n        onHide: () => setShow('hide'),\n        onLogout: () => setShow('logout'),\n        passLevel: passLevel(user)\n      }}>\n        <Route exact path=\"/\" component={Entry}></Route>\n        <Route path=\"/levelPage/:sid\" component={LevelPage}></Route>\n        <Route\n          path=\"/level/:sid/:levelID\"\n          component={SinglePlayerLevelBoard}\n        ></Route>\n        <Route path=\"/editor\" component={LevelEditor}></Route>\n        <Route exact path=\"/arena\" component={Arena}></Route>\n        <Route path=\"/arena/level/:lid\" component={ArenaLevelBoard}></Route>\n        <Route path=\"/user/:uid\" component={UserPage} />\n        {/* Sign-up Dialogue */}\n        <RegisterDialogue\n          open={show == \"signup\"}\n          onClose={handleClose}\n          onSwitchToLogin={() => setShow(\"login\")}\n        />\n        {/* Login Dialogue */}\n        <LoginDialogue\n          open={show == \"login\"}\n          onClose={handleClose}\n          onSwitchToSignup={() => setShow(\"signup\")}\n        />\n        <LogoutDialogue open={show == \"logout\"} />\n      </LoginContext.Provider>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}